<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>editor-sheet</name>
    <events>
        <variable constant="0" name="selectedNPC" sid="397388836405706" static="0" type="number">-1</variable>
        <variable constant="0" name="names" sid="772088141449987" static="0" type="text"></variable>
        <variable constant="0" name="buffer" sid="245496014963245" static="0" type="text"></variable>
        <variable constant="0" name="oldY" sid="702640549545997" static="0" type="number">0</variable>
        <variable constant="0" name="selY" sid="229170262827221" static="0" type="number">0</variable>
        <variable constant="0" name="selX" sid="209806631510671" static="0" type="number">0</variable>
        <variable constant="0" name="oldX" sid="428614266856839" static="0" type="number">0</variable>
        <variable constant="0" name="index" sid="917429502116300" static="0" type="number">0</variable>
        <variable constant="0" name="mapY" sid="373932660714981" static="0" type="number">0</variable>
        <variable constant="0" name="mapX" sid="634038725772258" static="0" type="number">0</variable>
        <variable constant="0" name="tileY1" sid="506796740992113" static="0" type="number">0</variable>
        <variable constant="0" name="tileX1" sid="637491552636805" static="0" type="number">0</variable>
        <variable constant="0" name="mapName" sid="922858679512460" static="0" type="text"></variable>
        <variable constant="0" name="indexY" sid="215961536684918" static="0" type="number">0</variable>
        <variable constant="0" name="indexX" sid="436233246968307" static="0" type="number">0</variable>
        <variable constant="0" name="playerY" sid="259895791487424" static="0" type="number">0</variable>
        <variable constant="0" name="playerX" sid="382940712186044" static="0" type="number">0</variable>
        <variable constant="0" name="bufferData" sid="934678728524265" static="0" type="text"></variable>
        <variable constant="0" name="bufferMeta" sid="260768971076095" static="0" type="text"></variable>
        <variable constant="0" name="testMap" sid="982165378952631" static="0" type="number">0</variable>
        <variable constant="0" name="mapSafe" sid="537926864325853" static="0" type="number">0</variable>
        <variable constant="0" name="mapSave" sid="460581666405059" static="0" type="number">0</variable>
        <variable constant="0" name="moveLoad" sid="154058984869134" static="0" type="number">0</variable>
        <variable constant="0" name="tileSelected" sid="134634109230752" static="0" type="number">0</variable>
        <variable constant="0" name="playerPlaced" sid="409603303438438" static="0" type="number">0</variable>
        <variable constant="0" name="weatherSelect" sid="251247472398340" static="0" type="number">0</variable>
        <event-group description="" sid="290684744816422" title="Editor - Initialization">
            <sub-events>
                <event-block sid="690874265422544">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="726919484341762" type="System" />
                    </conditions>
                    <actions>
                        <action id="10" name="Request fullscreen" sid="948132655239071" type="Browser">
                            <param id="0" name="Mode">3</param>
                        </action>
                        <action id="0" name="Set spraying" sid="969104685299093" type="weather">
                            <param id="0" name="State">0</param>
                        </action>
                        <action id="-21" name="Reset global variables" sid="384174546737171" type="System" />
                        <action id="0" name="Call function" sid="850760538325353" type="Function">
                            <param id="0" name="Name">&quot;create&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Call function" sid="795066700138423" type="Function">
                            <param id="0" name="Name">&quot;initialization&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Set text" sid="723757768988551" type="txtHelp">
                            <param id="0" name="Text">&quot;- To draw select tile from the tile list below and left click on level&quot; &amp; newline &amp; &quot;- To delete tile right click on it&quot; &amp; newline &amp; &quot;- To rotate tile on current layer middle click on it&quot; &amp; newline &amp; &quot;- Drawing, rotating and deleting tiles only work in TILE MODE&quot; &amp; newline &amp; &quot;- For deleting objects, click on object and press Del on keyboard or click on DELETE button&quot;&amp; newline &amp; &quot;- For moving NPCs, enemies and other objects, make sure that editor is set to OBJECT MODE&quot; &amp; newline &amp; &quot;- In order to test your level click on PLAY button on press F2 on keyboard&quot; &amp; newline &amp; &quot;- To reset the editor or create new empty map double click on NEW button&quot; &amp; newline &amp; &quot;- Use Q and E keyboard shortcuts to change layer, or use layer dropdown menu&quot; &amp; newline &amp; &quot;- Use A and D keyboard shortcuts to change current tileset, or use dropdown menu&quot;&amp; newline &amp; &quot;- Red X tile is used for placing empty tile and B tile is used for placing block tiles (you can only place block tile on Block layer) &quot; &amp; newline &amp; &quot;- TIP: If you want to completely erase current layer click on red X tile and then on FILL button&quot; &amp;newline &amp; &quot;- TIP: Because snow is slow, it takes a few seconds to appear on the screen, so be patient when editing intensity parameter&quot;</param>
                        </action>
                        <action behavior="Pin" id="0" name="Pin to object" sid="106600788895200" type="fileLoad">
                            <param id="0" name="Pin to">bgLoad</param>
                            <param id="1" name="Mode">0</param>
                        </action>
                        <action behavior="Pin" id="0" name="Pin to object" sid="209154918056755" type="txtLoad">
                            <param id="0" name="Pin to">bgLoad</param>
                            <param id="1" name="Mode">0</param>
                        </action>
                        <action disabled="1" id="3" name="Clear storage" sid="138430639538028" type="LocalStorage" />
                        <action id="1" name="Get item" sid="935104204529287" type="LocalStorage">
                            <param id="0" name="Key">&quot;data&quot;</param>
                        </action>
                        <action id="1" name="Request project file" sid="573929154968049" type="AJAX">
                            <param id="0" name="Tag">&quot;names&quot;</param>
                            <param id="1" name="File">first-names.txt</param>
                        </action>
                        <action id="-9" name="Destroy" sid="747415045564205" type="npc" />
                    </actions>
                </event-block>
                <event-block sid="556627087494498">
                    <conditions>
                        <condition id="1" name="On item get" sid="494548463446323" type="LocalStorage">
                            <param id="0" name="Key">&quot;data&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="11" name="Load" sid="998088807079104" type="MapData">
                            <param id="0" name="JSON">LocalStorage.ItemValue</param>
                        </action>
                        <action id="0" name="Call function" sid="286228823677107" type="Function">
                            <param id="0" name="Name">&quot;load&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="131847596823873" title="Editor - Common">
            <sub-events>
                <event-group description="" sid="398453562168256" title="Functions">
                    <sub-events>
                        <event-group description="" sid="871196980038070" title="Tile Initialization">
                            <sub-events>
                                <event-block sid="801236259496435">
                                    <conditions>
                                        <condition id="0" name="On function" sid="713350452787343" type="Function">
                                            <param id="0" name="Name">&quot;initialization&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="871701983353071" type="Function">
                                            <param id="0" name="Name">&quot;fill&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;Layer 1&quot;</param>
                                        </action>
                                        <action id="0" name="Call function" sid="179437880388398" type="Function">
                                            <param id="0" name="Name">&quot;fill&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;Layer 2&quot;</param>
                                        </action>
                                        <action id="0" name="Call function" sid="514171551812202" type="Function">
                                            <param id="0" name="Name">&quot;fill&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;Layer 3&quot;</param>
                                        </action>
                                        <action id="0" name="Call function" sid="388847699143994" type="Function">
                                            <param id="0" name="Name">&quot;fill&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;Layer 4&quot;</param>
                                        </action>
                                        <action id="0" name="Call function" sid="428736616186902" type="Function">
                                            <param id="0" name="Name">&quot;fill&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;Shadow&quot;</param>
                                        </action>
                                        <action id="0" name="Call function" sid="485803726773968" type="Function">
                                            <param id="0" name="Name">&quot;fill&quot;</param>
                                            <param id="1" name="Parameter {n}">&quot;Player&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="524147831451167" title="Tileset change">
                            <sub-events>
                                <event-block sid="223497837680824">
                                    <conditions>
                                        <condition id="0" name="On function" sid="600082839235138" type="Function">
                                            <param id="0" name="Name">&quot;tileset&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Destroy" sid="726549153684988" type="selector" />
                                        <action id="-9" name="Set value" sid="680916274509059" type="System">
                                            <param id="0" name="Variable">tileSelected</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="610008401677776">
                                            <conditions>
                                                <condition id="0" name="Compare selection" sid="347917301849335" type="tileList">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Index">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-4" name="Set layer visible" sid="493889561052323" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 1&quot;</param>
                                                    <param id="1" name="Visibility">1</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="753724720419465" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 2&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="964299135554244" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 3&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="447118721831133" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 4&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="289874165903626" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 5&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="575716054030456" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 6&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="724988826612812">
                                            <conditions>
                                                <condition id="0" name="Compare selection" sid="569379665464893" type="tileList">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Index">1</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-4" name="Set layer visible" sid="746996105916132" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 1&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="653117091521412" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 2&quot;</param>
                                                    <param id="1" name="Visibility">1</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="120776883543381" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 3&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="262846064719715" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 4&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="681489797020882" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 5&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="966856838353170" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 6&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="950725119527910">
                                            <conditions>
                                                <condition id="0" name="Compare selection" sid="113740276658974" type="tileList">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Index">2</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-4" name="Set layer visible" sid="443212067325214" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 1&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="447643088990646" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 2&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="436960938957604" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 3&quot;</param>
                                                    <param id="1" name="Visibility">1</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="316732436563965" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 4&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="302523868641573" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 5&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="257893123684914" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 6&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="132629814110811">
                                            <conditions>
                                                <condition id="0" name="Compare selection" sid="837895829889726" type="tileList">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Index">3</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-4" name="Set layer visible" sid="980324208660713" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 1&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="101418349840710" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 2&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="431317441189732" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 3&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="465216450826183" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 4&quot;</param>
                                                    <param id="1" name="Visibility">1</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="694273465425788" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 5&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="948358186149526" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 6&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="816974361711234">
                                            <conditions>
                                                <condition id="0" name="Compare selection" sid="325492671387650" type="tileList">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Index">4</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-4" name="Set layer visible" sid="994399381051562" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 1&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="956069864764305" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 2&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="441459940888459" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 3&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="986347947773194" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 4&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="269608165288982" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 5&quot;</param>
                                                    <param id="1" name="Visibility">1</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="771894734587175" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 6&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="638732652063461">
                                            <conditions>
                                                <condition id="0" name="Compare selection" sid="251462227133530" type="tileList">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Index">5</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-4" name="Set layer visible" sid="864688223925828" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 1&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="806536904431638" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 2&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="367834122500153" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 3&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="421327976527784" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 4&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="897813879294448" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 5&quot;</param>
                                                    <param id="1" name="Visibility">0</param>
                                                </action>
                                                <action id="-4" name="Set layer visible" sid="869124910751418" type="System">
                                                    <param id="0" name="Layer">&quot;Tileset 6&quot;</param>
                                                    <param id="1" name="Visibility">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="780330875765143" title="Fill">
                            <sub-events>
                                <comment>Loop whole level and set all tiles on current layer to selected tile</comment>
                                <event-block sid="297256219654396">
                                    <conditions>
                                        <condition id="0" name="On function" sid="441078274952492" type="Function">
                                            <param id="0" name="Name">&quot;fill&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="677753782445498">
                                            <conditions>
                                                <condition id="-10" name="For" sid="759863607054323" type="System">
                                                    <param id="0" name="Name">&quot;x&quot;</param>
                                                    <param id="1" name="Start index">0</param>
                                                    <param id="2" name="End index">39</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="108918068679671">
                                                    <conditions>
                                                        <condition id="-10" name="For" sid="692691447743913" type="System">
                                                            <param id="0" name="Name">&quot;y&quot;</param>
                                                            <param id="1" name="Start index">0</param>
                                                            <param id="2" name="End index">19</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <event-block sid="767962935657205">
                                                            <conditions>
                                                                <condition id="-34" name="Pick by evaluate" sid="635140825595572" type="System">
                                                                    <param id="0" name="Object">tilemap</param>
                                                                    <param id="1" name="Expression">tilemap.LayerName = Function.Param(0)</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="1" name="Set tile" sid="876092627091883" type="tilemap">
                                                                    <param id="0" name="Tile X">loopindex(&quot;x&quot;)</param>
                                                                    <param id="1" name="Tile Y">loopindex(&quot;y&quot;)</param>
                                                                    <param id="2" name="Tile">index</param>
                                                                    <param id="3" name="State">0</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="393404393088341" title="Reset">
                            <sub-events>
                                <comment>Loop whole level and set tile to 0 (empty tile)&#x0D;&#x0A;this function will also set all UI elements to their basic values</comment>
                                <event-block sid="861358156104125">
                                    <conditions>
                                        <condition id="0" name="On function" sid="336901436920615" type="Function">
                                            <param id="0" name="Name">&quot;reset&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="8" name="Set unfocused" sid="205775455575923" type="btnNew" />
                                        <action id="2" name="Release file" sid="558304398562498" type="fileLoad">
                                            <param id="0" name="File URL">fileLoad.FileURLAt(0)</param>
                                        </action>
                                        <action id="0" name="Set selection" sid="375195812623773" type="layerList">
                                            <param id="0" name="Index">0</param>
                                        </action>
                                        <action id="0" name="Set selection" sid="274399356176670" type="tileList">
                                            <param id="0" name="Index">0</param>
                                        </action>
                                        <action id="0" name="Set text" sid="642139404463193" type="inputX">
                                            <param id="0" name="Text">str(mapX)</param>
                                        </action>
                                        <action id="0" name="Set text" sid="210600730482116" type="inputY">
                                            <param id="0" name="Text">str(mapY)</param>
                                        </action>
                                        <action id="0" name="Set text" sid="278172912074183" type="inputName">
                                            <param id="0" name="Text">&quot;Untitled map&quot;</param>
                                        </action>
                                        <action id="-3" name="Set position" sid="297668787584820" type="player">
                                            <param id="0" name="X">-64</param>
                                            <param id="1" name="Y">-64</param>
                                        </action>
                                        <action id="1" name="Set tile" sid="103741012016017" type="playerTile">
                                            <param id="0" name="Tile X">playerX</param>
                                            <param id="1" name="Tile Y">playerY</param>
                                            <param id="2" name="Tile">0</param>
                                            <param id="3" name="State">0</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="541549874877444" type="System">
                                            <param id="0" name="Variable">playerPlaced</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="143903990420275" type="System">
                                            <param id="0" name="Variable">mapSafe</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="952688557918204" type="System">
                                            <param id="0" name="Variable">mapSave</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="6" name="Set checked" sid="575324745516929" type="chkSafe">
                                            <param id="0" name="State">0</param>
                                        </action>
                                        <action id="6" name="Set checked" sid="716966399338779" type="chkSave">
                                            <param id="0" name="State">0</param>
                                        </action>
                                        <action id="0" name="Set selection" sid="266418990898569" type="fogList">
                                            <param id="0" name="Index">0</param>
                                        </action>
                                        <action id="0" name="Set selection" sid="251565014501588" type="weatherList">
                                            <param id="0" name="Index">0</param>
                                        </action>
                                        <action id="-9" name="Destroy" sid="697255681382342" type="npc" />
                                    </actions>
                                    <sub-events>
                                        <event-block sid="360995581865058">
                                            <conditions>
                                                <condition id="-10" name="For" sid="343859890064155" type="System">
                                                    <param id="0" name="Name">&quot;x&quot;</param>
                                                    <param id="1" name="Start index">1</param>
                                                    <param id="2" name="End index">38</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="999739504599208">
                                                    <conditions>
                                                        <condition id="-10" name="For" sid="430592943903620" type="System">
                                                            <param id="0" name="Name">&quot;y&quot;</param>
                                                            <param id="1" name="Start index">1</param>
                                                            <param id="2" name="End index">19</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="1" name="Set tile" sid="930320049536885" type="tilemap">
                                                            <param id="0" name="Tile X">loopindex(&quot;x&quot;)</param>
                                                            <param id="1" name="Tile Y">loopindex(&quot;y&quot;)</param>
                                                            <param id="2" name="Tile">0</param>
                                                            <param id="3" name="State">0</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="115758215803302" title="Load">
                            <sub-events>
                                <comment>This load function is used for loading already exsisting map.&#x0D;&#x0A;If there is value inside array it will load it&apos;s value, but if it doesn&apos;t exsist it will create new map.&#x0D;&#x0A;This is usefull when you are navigating with arrows, so it will load new map or show blank map.</comment>
                                <event-block sid="205376129179499">
                                    <conditions>
                                        <condition id="0" name="On function" sid="460680534240080" type="Function">
                                            <param id="0" name="Name">&quot;load&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block any="1" sid="582950137427768">
                                            <conditions>
                                                <condition id="1" name="Compare at XY" sid="114217896621370" type="MapData">
                                                    <param id="0" name="X">mapX</param>
                                                    <param id="1" name="Y">mapY</param>
                                                    <param id="2" name="Comparison">0</param>
                                                    <param id="3" name="Value">&quot;&quot;</param>
                                                </condition>
                                                <condition id="1" name="Compare at XY" sid="671587939171841" type="MapData">
                                                    <param id="0" name="X">mapX</param>
                                                    <param id="1" name="Y">mapY</param>
                                                    <param id="2" name="Comparison">0</param>
                                                    <param id="3" name="Value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Call function" sid="328243899457516" type="Function">
                                                    <param id="0" name="Name">&quot;reset&quot;</param>
                                                    <param id="1" name="Parameter {n}"></param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <comment>Because our map data has multiple values, here i have created main buffer where whole data from array cell is stored.&#x0D;&#x0A;Then i break those infomation in two parts, Meta data, where map name and it&apos;s coordinates are stored and Data section, where map data is stored</comment>
                                        <event-block sid="940574272296924">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="158206612793840" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Call function" sid="242214962402074" type="Function">
                                                    <param id="0" name="Name">&quot;reset&quot;</param>
                                                    <param id="1" name="Parameter {n}"></param>
                                                </action>
                                                <action id="2" name="Release file" sid="834794599787192" type="fileLoad">
                                                    <param id="0" name="File URL">&quot;0&quot;</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="662662167785994" type="System">
                                                    <param id="0" name="Variable">buffer</param>
                                                    <param id="1" name="Value">MapData.At(mapX,mapY)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="337461350505973" type="System">
                                                    <param id="0" name="Variable">bufferMeta</param>
                                                    <param id="1" name="Value">tokenat(buffer,0,&quot;/&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="535105049250198" type="System">
                                                    <param id="0" name="Variable">bufferData</param>
                                                    <param id="1" name="Value">tokenat(buffer,1,&quot;/&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="656104235100714" type="System">
                                                    <param id="0" name="Variable">mapName</param>
                                                    <param id="1" name="Value">tokenat(bufferMeta,0,&quot;_&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="558590935584363" type="System">
                                                    <param id="0" name="Variable">mapX</param>
                                                    <param id="1" name="Value">tokenat(bufferMeta,1,&quot;_&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="230743311676814" type="System">
                                                    <param id="0" name="Variable">mapY</param>
                                                    <param id="1" name="Value">tokenat(bufferMeta,2,&quot;_&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="669603288916002" type="System">
                                                    <param id="0" name="Variable">playerX</param>
                                                    <param id="1" name="Value">tokenat(bufferMeta,3,&quot;_&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="874294801848229" type="System">
                                                    <param id="0" name="Variable">playerY</param>
                                                    <param id="1" name="Value">tokenat(bufferMeta,4,&quot;_&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="246797073813974" type="System">
                                                    <param id="0" name="Variable">playerPlaced</param>
                                                    <param id="1" name="Value">tokenat(bufferMeta,5,&quot;_&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="846159904029156" type="System">
                                                    <param id="0" name="Variable">mapSafe</param>
                                                    <param id="1" name="Value">tokenat(bufferMeta,6,&quot;_&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="573072332355079" type="System">
                                                    <param id="0" name="Variable">mapSave</param>
                                                    <param id="1" name="Value">tokenat(bufferMeta,7,&quot;_&quot;)</param>
                                                </action>
                                                <action id="-9" name="Set value" sid="305825672112049" type="System">
                                                    <param id="0" name="Variable">weatherSelect</param>
                                                    <param id="1" name="Value">tokenat(bufferMeta,8,&quot;_&quot;)</param>
                                                </action>
                                                <action id="3" name="Set value" sid="346124863361902" type="weatherIntensity">
                                                    <param id="0" name="Value">int(tokenat(bufferMeta,9,&quot;_&quot;))</param>
                                                </action>
                                                <action id="0" name="Set selection" sid="767680980135962" type="fogList">
                                                    <param id="0" name="Index">int(tokenat(bufferMeta,10,&quot;_&quot;))</param>
                                                </action>
                                                <action id="-10" name="Set value" sid="696090358787014" type="fog">
                                                    <param id="0" name="Instance variable">speed</param>
                                                    <param id="1" name="Value">int(tokenat(bufferMeta,11,&quot;_&quot;))</param>
                                                </action>
                                                <action id="3" name="Set value" sid="805244875775514" type="fogSpeed">
                                                    <param id="0" name="Value">int(tokenat(bufferMeta,12,&quot;_&quot;))</param>
                                                </action>
                                                <action id="0" name="Set text" sid="409134053317657" type="inputX">
                                                    <param id="0" name="Text">str(mapX)</param>
                                                </action>
                                                <action id="0" name="Set text" sid="430439476244268" type="inputY">
                                                    <param id="0" name="Text">str(mapY)</param>
                                                </action>
                                                <action id="0" name="Set text" sid="702914343492643" type="inputName">
                                                    <param id="0" name="Text">str(mapName)</param>
                                                </action>
                                                <action id="0" name="Set selection" sid="814499936614737" type="weatherList">
                                                    <param id="0" name="Index">weatherSelect</param>
                                                </action>
                                            </actions>
                                            <sub-events>
                                                <event-block sid="769506631283240">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="275332337058409" type="System">
                                                            <param id="0" name="First value">int(tokenat(bufferMeta,10,&quot;_&quot;))</param>
                                                            <param id="1" name="Comparison">0</param>
                                                            <param id="2" name="Second value">0</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-13" name="Set boolean" sid="417552223479262" type="fog">
                                                            <param id="0" name="Instance variable">show</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <variable constant="0" name="counter" sid="315513769756309" static="0" type="number">0</variable>
                                                <event-block sid="172837275460907">
                                                    <conditions>
                                                        <condition id="-10" name="For" sid="643495624165335" type="System">
                                                            <param id="0" name="Name">&quot;i&quot;</param>
                                                            <param id="1" name="Start index">0</param>
                                                            <param id="2" name="End index">7</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <event-block sid="237810905046582">
                                                            <conditions>
                                                                <condition id="-34" name="Pick by evaluate" sid="294921979006814" type="System">
                                                                    <param id="0" name="Object">tilemap</param>
                                                                    <param id="1" name="Expression">tilemap.LayerNumber = loopindex(&quot;i&quot;) + 1</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="4" name="Load" sid="865929772487935" type="tilemap">
                                                                    <param id="0" name="JSON">str(tokenat(bufferData,counter,&quot;|&quot;))</param>
                                                                </action>
                                                                <action id="-10" name="Add to" sid="777661788476111" type="System">
                                                                    <param id="0" name="Variable">counter</param>
                                                                    <param id="1" name="Value">1</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                                <event-block sid="746322278910647">
                                                    <conditions>
                                                        <condition id="-14" name="Compare variable" sid="220045728061224" type="System">
                                                            <param id="0" name="Variable">playerPlaced</param>
                                                            <param id="1" name="Comparison">0</param>
                                                            <param id="2" name="Value">1</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="1" name="Set tile" sid="634908989841132" type="playerTile">
                                                            <param id="0" name="Tile X">playerX</param>
                                                            <param id="1" name="Tile Y">playerY</param>
                                                            <param id="2" name="Tile">1</param>
                                                            <param id="3" name="State">0</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="522904104407672">
                                                    <conditions>
                                                        <condition id="-14" name="Compare variable" sid="962683218827039" type="System">
                                                            <param id="0" name="Variable">mapSafe</param>
                                                            <param id="1" name="Comparison">0</param>
                                                            <param id="2" name="Value">1</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="6" name="Set checked" sid="803716878486821" type="chkSafe">
                                                            <param id="0" name="State">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="652923435733074">
                                                    <conditions>
                                                        <condition id="-14" name="Compare variable" sid="182819311526688" type="System">
                                                            <param id="0" name="Variable">mapSave</param>
                                                            <param id="1" name="Comparison">0</param>
                                                            <param id="2" name="Value">1</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="6" name="Set checked" sid="721789972028062" type="chkSave">
                                                            <param id="0" name="State">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="828761798363613">
                                                    <conditions>
                                                        <condition id="3" name="For each element" sid="401990925413295" type="NpcData">
                                                            <param id="0" name="Axes">2</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-3" name="Create object" sid="930498634786835" type="System">
                                                            <param id="0" name="Object to create">npc</param>
                                                            <param id="1" name="Layer">&quot;Player&quot;</param>
                                                            <param id="2" name="X">int(tokenat(NpcData.CurValue,2,&quot;;&quot;))</param>
                                                            <param id="3" name="Y">int(tokenat(NpcData.CurValue,2,&quot;;&quot;))</param>
                                                        </action>
                                                        <action id="5" name="Set frame" sid="359236285936220" type="npc">
                                                            <param id="0" name="Frame number">int(tokenat(NpcData.CurValue,1,&quot;;&quot;))</param>
                                                        </action>
                                                        <action id="-10" name="Set value" sid="684260894515255" type="npc">
                                                            <param id="0" name="Instance variable">name</param>
                                                            <param id="1" name="Value">tokenat(NpcData.CurValue,0,&quot;;&quot;)</param>
                                                        </action>
                                                        <action id="-10" name="Set value" sid="909656997241780" type="npc">
                                                            <param id="0" name="Instance variable">posX</param>
                                                            <param id="1" name="Value">int(tokenat(NpcData.CurValue,2,&quot;;&quot;))</param>
                                                        </action>
                                                        <action id="-10" name="Set value" sid="123621978087631" type="npc">
                                                            <param id="0" name="Instance variable">posY</param>
                                                            <param id="1" name="Value">int(tokenat(NpcData.CurValue,3,&quot;;&quot;))</param>
                                                        </action>
                                                        <action id="-10" name="Set value" sid="216353656516372" type="npc">
                                                            <param id="0" name="Instance variable">type</param>
                                                            <param id="1" name="Value">tokenat(NpcData.CurValue,5,&quot;;&quot;)</param>
                                                        </action>
                                                        <action id="-10" name="Set value" sid="758059735280497" type="npc">
                                                            <param id="0" name="Instance variable">hasQuest</param>
                                                            <param id="1" name="Value">int(tokenat(NpcData.CurValue,4,&quot;;&quot;))</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="459617416556028">
                                                    <conditions />
                                                    <actions>
                                                        <action id="0" name="Call function" sid="771013788218798" type="Function">
                                                            <param id="0" name="Name">&quot;playEffects&quot;</param>
                                                            <param id="1" name="Parameter {n}">weatherSelect{###}fog.show</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="601225129907649" title="Save">
                            <sub-events>
                                <comment>When saving map, first we save it&apos;s meta data (name and coordinates) into text object&#x0D;&#x0A;Then we loop through all Tilemaps and append it&apos;s JSON data, next to delimeter &quot;|&quot;. This delimeter is used for tokenat expression&#x0D;&#x0A;After map saved in array, we save whole array inside LocalStorage, so it&apos;s permanently saved.</comment>
                                <event-block sid="362320330241813">
                                    <conditions>
                                        <condition id="0" name="On function" sid="760883757914702" type="Function">
                                            <param id="0" name="Name">&quot;save&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set text" sid="629144219752859" type="txtExport">
                                            <param id="0" name="Text">&quot;&quot;</param>
                                        </action>
                                        <action id="1" name="Append text" sid="237236195874329" type="txtExport">
                                            <param id="0" name="Text">inputName.Text &amp; &quot;_&quot; &amp; inputX.Text &amp; &quot;_&quot; &amp; inputY.text &amp; &quot;_&quot; &amp; playerX &amp; &quot;_&quot; &amp; playerY &amp; &quot;_&quot; &amp; playerPlaced &amp; &quot;_&quot;</param>
                                        </action>
                                        <action id="-16" name="Wait" sid="748999756627893" type="System">
                                            <param id="0" name="Seconds">0.1</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="286506788451158">
                                            <conditions>
                                                <condition id="1" name="Is checked" sid="734701678957343" type="chkSafe" />
                                            </conditions>
                                            <actions>
                                                <action id="1" name="Append text" sid="565849540286181" type="txtExport">
                                                    <param id="0" name="Text">&quot;1&quot; &amp; &quot;_&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="306834229399619">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="842588386179616" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="1" name="Append text" sid="950279099206976" type="txtExport">
                                                    <param id="0" name="Text">&quot;0&quot; &amp; &quot;_&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="754895050954246">
                                            <conditions>
                                                <condition id="1" name="Is checked" sid="396609969587338" type="chkSave" />
                                            </conditions>
                                            <actions>
                                                <action id="1" name="Append text" sid="190337503275405" type="txtExport">
                                                    <param id="0" name="Text">&quot;1&quot; &amp; &quot;_&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="293057925878346">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="764914623257746" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="1" name="Append text" sid="197660131871670" type="txtExport">
                                                    <param id="0" name="Text">&quot;0&quot; &amp; &quot;_&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="662092020206856">
                                            <conditions />
                                            <actions>
                                                <action id="1" name="Append text" sid="874428014509987" type="txtExport">
                                                    <param id="0" name="Text">weatherSelect &amp; &quot;_&quot; &amp; weatherIntensity.Value &amp; &quot;_&quot; &amp; fog.show &amp; &quot;_&quot; &amp; fog.speed &amp; &quot;_&quot; &amp; fogTransparency.Value &amp; &quot;/&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="401906170088305">
                                            <conditions>
                                                <condition id="-10" name="For" sid="885647238854836" type="System">
                                                    <param id="0" name="Name">&quot;i&quot;</param>
                                                    <param id="1" name="Start index">1</param>
                                                    <param id="2" name="End index">7</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="312820389264632">
                                                    <conditions>
                                                        <condition id="-34" name="Pick by evaluate" sid="212028373903058" type="System">
                                                            <param id="0" name="Object">tilemap</param>
                                                            <param id="1" name="Expression">tilemap.LayerNumber = loopindex(&quot;i&quot;)</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="1" name="Append text" sid="446474080572873" type="txtExport">
                                                            <param id="0" name="Text">tilemap.TilesJSON&amp; &quot;|&quot;</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="651183365195365">
                                            <conditions>
                                                <condition id="-24" name="For Each (ordered)" sid="798173254411410" type="System">
                                                    <param id="0" name="Object">npc</param>
                                                    <param id="1" name="Expression">npc.id</param>
                                                    <param id="2" name="Order">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="5" name="Push" sid="882367921980540" type="NpcData">
                                                    <param id="0" name="Where">1</param>
                                                    <param id="1" name="Value">npc.name &amp; &quot;;&quot; &amp; npc.AnimationFrame&amp; &quot;;&quot; &amp; npc.posX &amp; &quot;;&quot; &amp; npc.posY &amp; &quot;;&quot; &amp; npc.hasQuest &amp; npc.type</param>
                                                    <param id="2" name="Axis">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="253281296793094">
                                            <conditions />
                                            <actions>
                                                <action id="-16" name="Wait" sid="323879692605667" type="System">
                                                    <param id="0" name="Seconds">0.1</param>
                                                </action>
                                                <action id="3" name="Set at XY" sid="612303164707024" type="MapData">
                                                    <param id="0" name="X">int(inputX.Text)</param>
                                                    <param id="1" name="Y">int(inputY.Text)</param>
                                                    <param id="2" name="Value">txtExport.Text</param>
                                                </action>
                                                <action id="0" name="Set item" sid="427316553388318" type="LocalStorage">
                                                    <param id="0" name="Key">&quot;data&quot;</param>
                                                    <param id="1" name="Value">MapData.AsJSON</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="371376399455420" title="Create">
                            <sub-events>
                                <comment>Fill tile index window with all available tiles</comment>
                                <variable constant="0" name="counter" sid="760996729978376" static="0" type="number">0</variable>
                                <event-block sid="181183988030615">
                                    <conditions>
                                        <condition id="0" name="On function" sid="825221070976269" type="Function">
                                            <param id="0" name="Name">&quot;create&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="915395647477953">
                                            <conditions>
                                                <condition id="-10" name="For" sid="834898441138123" type="System">
                                                    <param id="0" name="Name">&quot;z&quot;</param>
                                                    <param id="1" name="Start index">9</param>
                                                    <param id="2" name="End index">12</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="437782031129398">
                                                    <conditions>
                                                        <condition id="-10" name="For" sid="108151752717651" type="System">
                                                            <param id="0" name="Name">&quot;y&quot;</param>
                                                            <param id="1" name="Start index">0</param>
                                                            <param id="2" name="End index">12</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <event-block sid="509721198952259">
                                                            <conditions>
                                                                <condition id="-10" name="For" sid="596876966518768" type="System">
                                                                    <param id="0" name="Name">&quot;x&quot;</param>
                                                                    <param id="1" name="Start index">0</param>
                                                                    <param id="2" name="End index">25</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions />
                                                            <sub-events>
                                                                <event-block sid="763123712457608">
                                                                    <conditions>
                                                                        <condition id="-33" name="Pick by comparison" sid="477608564612232" type="System">
                                                                            <param id="0" name="Object">tileIndex</param>
                                                                            <param id="1" name="Expression">tileIndex.LayerNumber</param>
                                                                            <param id="2" name="Comparison">0</param>
                                                                            <param id="3" name="Value">loopindex(&quot;z&quot;)</param>
                                                                        </condition>
                                                                    </conditions>
                                                                    <actions>
                                                                        <action id="1" name="Set tile" sid="312614030831826" type="tileIndex">
                                                                            <param id="0" name="Tile X">loopindex(&quot;x&quot;)</param>
                                                                            <param id="1" name="Tile Y">loopindex(&quot;y&quot;)</param>
                                                                            <param id="2" name="Tile">counter</param>
                                                                            <param id="3" name="State">0</param>
                                                                        </action>
                                                                        <action id="-10" name="Add to" sid="884559895215197" type="System">
                                                                            <param id="0" name="Variable">counter</param>
                                                                            <param id="1" name="Value">1</param>
                                                                        </action>
                                                                    </actions>
                                                                </event-block>
                                                            </sub-events>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                    </sub-events>
                </event-group>
                <event-group description="" sid="128206922030913" title="UI Buttons">
                    <sub-events>
                        <event-group description="" sid="198636049086036" title="Import">
                            <sub-events>
                                <event-block sid="432215383763352">
                                    <conditions>
                                        <condition id="0" name="On clicked" sid="875538143916903" type="btnImport" />
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="187006270345502" type="System">
                                            <param id="0" name="Variable">moveLoad</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-12" name="Set group active" sid="110996347038163" type="System">
                                            <param id="0" name="Group name">&quot;Place tile&quot;</param>
                                            <param id="1" name="State">0</param>
                                        </action>
                                        <action id="-9" name="Destroy" sid="114914836036752" type="selector" />
                                        <action id="8" name="Set unfocused" sid="586210082720177" type="btnImport" />
                                        <action id="-9" name="Set value" sid="823583103458223" type="System">
                                            <param id="0" name="Variable">tileSelected</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-9" name="Destroy" sid="740466197305382" type="selector" />
                                    </actions>
                                </event-block>
                                <comment>Moving load screen inside or outside viewfield</comment>
                                <event-block sid="845415346568673">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="274137571154700" type="System">
                                            <param id="0" name="Variable">moveLoad</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-2" name="Set Y" sid="723924184754234" type="bgLoad">
                                            <param id="0" name="Y">lerp(Self.Y,moveTo.Y,0.20)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="535332609620141">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="985483367300104" type="System">
                                            <param id="0" name="Variable">moveLoad</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-2" name="Set Y" sid="560152125030067" type="bgLoad">
                                            <param id="0" name="Y">lerp(Self.Y,-144,0.20)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>Loading map data from external JSON file</comment>
                                <event-block sid="481981286125087">
                                    <conditions>
                                        <condition id="0" name="On changed" sid="480511549227955" type="fileLoad" />
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Request URL" sid="464430807219348" type="AJAX">
                                            <param id="0" name="Tag">&quot;load&quot;</param>
                                            <param id="1" name="URL">fileLoad.FileURLAt(0)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="483483287366161">
                                    <conditions>
                                        <condition id="0" name="On completed" sid="438668795547755" type="AJAX">
                                            <param id="0" name="Tag">&quot;load&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="11" name="Load" sid="941716122269184" type="MapData">
                                            <param id="0" name="JSON">AJAX.LastData</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="427246432838497" type="System">
                                            <param id="0" name="Variable">moveLoad</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-12" name="Set group active" sid="785544188962169" type="System">
                                            <param id="0" name="Group name">&quot;Place tile&quot;</param>
                                            <param id="1" name="State">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>Move load screen outside viewfield when ESC is pressed</comment>
                                <event-block sid="105886631654908">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="160304454548955" type="Keyboard">
                                            <param id="0" name="Key">27</param>
                                        </condition>
                                        <condition id="-14" name="Compare variable" sid="248515230151674" type="System">
                                            <param id="0" name="Variable">moveLoad</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="222192871383295" type="System">
                                            <param id="0" name="Variable">moveLoad</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="414820085198323" title="XY Arrows">
                            <sub-events>
                                <comment>Arrows for changing values of X and Y coordinates and loading next map&#x0D;&#x0A;For more info about loading maps check out LOAD function</comment>
                                <event-block sid="321762561143956">
                                    <conditions>
                                        <condition id="6" name="On object clicked" sid="979803891578824" type="Mouse">
                                            <param id="0" name="Mouse button">0</param>
                                            <param id="1" name="Click type">0</param>
                                            <param id="2" name="Object clicked">arrowsXY</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="340153352206346">
                                            <conditions>
                                                <condition id="3" name="Compare frame" sid="168220738963214" type="arrowsXY">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Number">0</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="920173823691947">
                                                    <conditions>
                                                        <condition id="-14" name="Compare variable" sid="435257378773780" type="System">
                                                            <param id="0" name="Variable">mapX</param>
                                                            <param id="1" name="Comparison">4</param>
                                                            <param id="2" name="Value">0</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-11" name="Subtract from" sid="967939077558738" type="System">
                                                            <param id="0" name="Variable">mapX</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                        <action id="0" name="Set text" sid="959253931700824" type="inputX">
                                                            <param id="0" name="Text">str(mapX)</param>
                                                        </action>
                                                        <action id="0" name="Call function" sid="875053651161161" type="Function">
                                                            <param id="0" name="Name">&quot;load&quot;</param>
                                                            <param id="1" name="Parameter {n}"></param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="510690138714935">
                                            <conditions>
                                                <condition id="3" name="Compare frame" sid="655880136105597" type="arrowsXY">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Number">1</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="824255250911102">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="279498841336491" type="System">
                                                            <param id="0" name="First value">mapX</param>
                                                            <param id="1" name="Comparison">2</param>
                                                            <param id="2" name="Second value">999</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-10" name="Add to" sid="601243677035388" type="System">
                                                            <param id="0" name="Variable">mapX</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                        <action id="0" name="Set text" sid="956273180600626" type="inputX">
                                                            <param id="0" name="Text">str(mapX)</param>
                                                        </action>
                                                        <action id="0" name="Call function" sid="957304024677451" type="Function">
                                                            <param id="0" name="Name">&quot;load&quot;</param>
                                                            <param id="1" name="Parameter {n}"></param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="610126141514381">
                                            <conditions>
                                                <condition id="3" name="Compare frame" sid="854021201828242" type="arrowsXY">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Number">2</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="915221548599958">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="214225058048686" type="System">
                                                            <param id="0" name="First value">mapY</param>
                                                            <param id="1" name="Comparison">4</param>
                                                            <param id="2" name="Second value">0</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-11" name="Subtract from" sid="555508733229318" type="System">
                                                            <param id="0" name="Variable">mapY</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                        <action id="0" name="Set text" sid="876396855166633" type="inputY">
                                                            <param id="0" name="Text">str(mapY)</param>
                                                        </action>
                                                        <action id="0" name="Call function" sid="607758872350572" type="Function">
                                                            <param id="0" name="Name">&quot;load&quot;</param>
                                                            <param id="1" name="Parameter {n}"></param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="835929316355999">
                                            <conditions>
                                                <condition id="3" name="Compare frame" sid="248023690195141" type="arrowsXY">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Number">3</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="825725987202378">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="136178052902827" type="System">
                                                            <param id="0" name="First value">mapY</param>
                                                            <param id="1" name="Comparison">2</param>
                                                            <param id="2" name="Second value">999</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-10" name="Add to" sid="618967146320697" type="System">
                                                            <param id="0" name="Variable">mapY</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                        <action id="0" name="Set text" sid="659317055660362" type="inputY">
                                                            <param id="0" name="Text">str(mapY)</param>
                                                        </action>
                                                        <action id="0" name="Call function" sid="734801160515546" type="Function">
                                                            <param id="0" name="Name">&quot;load&quot;</param>
                                                            <param id="1" name="Parameter {n}"></param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block any="1" sid="547924786071329">
                                    <conditions>
                                        <condition id="1" name="On text changed" sid="589716113697196" type="inputX" />
                                        <condition id="1" name="On text changed" sid="119133055402518" type="inputY" />
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="279211247096971" type="System">
                                            <param id="0" name="Variable">mapX</param>
                                            <param id="1" name="Value">int(inputX.Text)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="301034834918918" type="System">
                                            <param id="0" name="Variable">mapY</param>
                                            <param id="1" name="Value">int(inputY.Text)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="531246462216363">
                                    <conditions>
                                        <condition id="0" name="On clicked" sid="361672106933526" type="btnGo" />
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="850715415119409" type="Function">
                                            <param id="0" name="Name">&quot;load&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <comment>Exit from editor</comment>
                        <event-block sid="440752333963536">
                            <conditions>
                                <condition id="6" name="On object clicked" sid="625756777074475" type="Mouse">
                                    <param id="0" name="Mouse button">0</param>
                                    <param id="1" name="Click type">0</param>
                                    <param id="2" name="Object clicked">exit</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="1" name="Close" sid="475649011603591" type="Browser" />
                            </actions>
                        </event-block>
                        <comment>Reset editor</comment>
                        <event-block sid="519883476617418">
                            <conditions>
                                <condition id="0" name="On clicked" sid="694947830002328" type="btnNew" />
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="739463166517493">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="312713144355337" type="btnNew">
                                            <param id="0" name="Instance variable">clicked</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="354580866909963" type="btnNew">
                                            <param id="0" name="Instance variable">clicked</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action behavior="Timer" id="0" name="Start timer" sid="208016231548668" type="btnNew">
                                            <param id="0" name="Duration">0.5</param>
                                            <param id="1" name="Type">0</param>
                                            <param id="2" name="Tag">&quot;click&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="323907942001452">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="678551266737479" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="252561786169147" type="Function">
                                            <param id="0" name="Name">&quot;reset&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                        <action id="-10" name="Set value" sid="884753512342961" type="btnNew">
                                            <param id="0" name="Instance variable">clicked</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Reseting the editor requires double click on NEW button, so if bouton is only clicked once, it will reset to it&apos;s default state after half second.</comment>
                        <event-block sid="244277764547202">
                            <conditions>
                                <condition behavior="Timer" id="0" name="On timer" sid="767256395899123" type="btnNew">
                                    <param id="0" name="Tag">&quot;click&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="315547542635640" type="btnNew">
                                    <param id="0" name="Instance variable">clicked</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Export map as JSON data file</comment>
                        <event-block sid="365853371726567">
                            <conditions>
                                <condition id="0" name="On clicked" sid="867433977367763" type="btnExport" />
                            </conditions>
                            <actions>
                                <action id="8" name="Set unfocused" sid="265651927825731" type="btnExport" />
                                <action id="12" name="Download" sid="186954920283942" type="MapData">
                                    <param id="0" name="Filename">&quot;Data.map&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Save map inside array and show message if save was successfull or not</comment>
                        <event-block sid="681629572995430">
                            <conditions>
                                <condition id="0" name="On clicked" sid="964822587908433" type="btnSave" />
                            </conditions>
                            <actions>
                                <action id="8" name="Set unfocused" sid="413915901773429" type="btnExport" />
                                <action id="0" name="Call function" sid="523283090973636" type="Function">
                                    <param id="0" name="Name">&quot;save&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="479828459567071">
                            <conditions>
                                <condition id="0" name="On item set" sid="818591772362045" type="LocalStorage">
                                    <param id="0" name="Key">&quot;data&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Alert" sid="245467030492693" type="Browser">
                                    <param id="0" name="Message">&quot;Map successfully saved!&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="795524889138930">
                            <conditions>
                                <condition id="5" name="On error" sid="752585961011118" type="LocalStorage" />
                            </conditions>
                            <actions>
                                <action id="0" name="Alert" sid="814246567964587" type="Browser">
                                    <param id="0" name="Message">&quot;Error while saving data!&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Show help</comment>
                        <event-block sid="201785514179532">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="758526266322432" type="Keyboard">
                                    <param id="0" name="Key">112</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="977062253704052">
                                    <conditions>
                                        <condition id="-9" name="Layer is visible" sid="689993593764760" type="System">
                                            <param id="0" name="Layer">&quot;Help&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set layer visible" sid="364282619528929" type="System">
                                            <param id="0" name="Layer">&quot;Help&quot;</param>
                                            <param id="1" name="Visibility">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="143630136153153">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="639319381068514" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set layer visible" sid="430027560499596" type="System">
                                            <param id="0" name="Layer">&quot;Help&quot;</param>
                                            <param id="1" name="Visibility">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Fill button</comment>
                        <event-block sid="111476196372743">
                            <conditions>
                                <condition id="0" name="On clicked" sid="189030842691449" type="btnFill" />
                            </conditions>
                            <actions>
                                <action id="8" name="Set unfocused" sid="214705617305438" type="btnFill" />
                                <action id="0" name="Call function" sid="833090450737835" type="Function">
                                    <param id="0" name="Name">&quot;fill&quot;</param>
                                    <param id="1" name="Parameter {n}">layerList.SelectedText</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Start playtest of the map</comment>
                        <event-block any="1" sid="882930978413358">
                            <conditions>
                                <condition id="0" name="On clicked" sid="808144207039855" type="btnPlay" />
                                <condition id="0" name="On key pressed" sid="313441635373214" type="Keyboard">
                                    <param id="0" name="Key">113</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="8" name="Set unfocused" sid="196880379536407" type="btnPlay" />
                            </actions>
                            <sub-events>
                                <event-block sid="607298088698799">
                                    <conditions>
                                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="921159896424528" type="btnPlay">
                                            <param id="0" name="Instance variable">isPlaying</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="985662931676188">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="124016365389291" type="System">
                                                    <param id="0" name="Variable">playerPlaced</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Alert" sid="340967783552047" type="Browser">
                                                    <param id="0" name="Message">&quot;ERROR: Player location not set.&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="530706966780181">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="176378647446207" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Set value" sid="232802917543260" type="System">
                                                    <param id="0" name="Variable">testMap</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Change current layer vith keyboard shortcuts</comment>
                        <event-block sid="777924165861578">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="301254723996121" type="Keyboard">
                                    <param id="0" name="Key">69</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="517735844975189">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="601962034391717" type="System">
                                            <param id="0" name="First value">layerList.SelectedIndex</param>
                                            <param id="1" name="Comparison">2</param>
                                            <param id="2" name="Second value">5</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set selection" sid="966493644986002" type="layerList">
                                            <param id="0" name="Index">layerList.SelectedIndex + 1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="669103939239487">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="304032041548921" type="Keyboard">
                                    <param id="0" name="Key">81</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="985315608321293">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="446958577488670" type="System">
                                            <param id="0" name="First value">layerList.SelectedIndex</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Second value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set selection" sid="845809239272652" type="layerList">
                                            <param id="0" name="Index">layerList.SelectedIndex - 1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Change current tileset vith keyboard shortcuts</comment>
                        <event-block sid="933663384198382">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="656550999397618" type="Keyboard">
                                    <param id="0" name="Key">68</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="535830649131768">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="504890433468319" type="System">
                                            <param id="0" name="First value">tileList.SelectedIndex</param>
                                            <param id="1" name="Comparison">2</param>
                                            <param id="2" name="Second value">2</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set selection" sid="931229426935662" type="tileList">
                                            <param id="0" name="Index">tileList.SelectedIndex + 1</param>
                                        </action>
                                        <action id="0" name="Call function" sid="928111760831464" type="Function">
                                            <param id="0" name="Name">&quot;tileset&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="218050308890360">
                            <conditions>
                                <condition id="0" name="On key pressed" sid="562520180134406" type="Keyboard">
                                    <param id="0" name="Key">65</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="186868958414712">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="119655072630151" type="System">
                                            <param id="0" name="First value">tileList.SelectedIndex</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Second value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set selection" sid="957337538776934" type="tileList">
                                            <param id="0" name="Index">tileList.SelectedIndex - 1</param>
                                        </action>
                                        <action id="0" name="Call function" sid="499552930324774" type="Function">
                                            <param id="0" name="Name">&quot;tileset&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <comment>Changing the tileset</comment>
                        <event-block sid="703265547697571">
                            <conditions>
                                <condition id="1" name="On selection changed" sid="191971969902171" type="tileList" />
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="364648027889668" type="Function">
                                    <param id="0" name="Name">&quot;tileset&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Show or hide the grid</comment>
                        <event-block sid="785187950127247">
                            <conditions>
                                <condition id="1" name="Is checked" sid="882603946858972" type="chkGrid" />
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="758721866530131" type="grid">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                                <action id="8" name="Set unfocused" sid="158640823938541" type="chkGrid" />
                            </actions>
                        </event-block>
                        <event-block sid="150664799471998">
                            <conditions>
                                <condition id="-22" name="Else" sid="552424966588007" type="System" />
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="445301071100354" type="grid">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                                <action id="8" name="Set unfocused" sid="812317012858643" type="chkGrid" />
                            </actions>
                        </event-block>
                        <comment>Show or hide block tiles</comment>
                        <event-block sid="751565114254136">
                            <conditions>
                                <condition id="1" name="Is checked" sid="757199496601317" type="chkBlock" />
                            </conditions>
                            <actions>
                                <action id="-4" name="Set layer visible" sid="334248031643097" type="System">
                                    <param id="0" name="Layer">&quot;Block&quot;</param>
                                    <param id="1" name="Visibility">1</param>
                                </action>
                                <action id="8" name="Set unfocused" sid="833542623918782" type="chkBlock" />
                            </actions>
                        </event-block>
                        <event-block sid="203651536706931">
                            <conditions>
                                <condition id="-22" name="Else" sid="429765832178310" type="System" />
                            </conditions>
                            <actions>
                                <action id="-4" name="Set layer visible" sid="659675776975571" type="System">
                                    <param id="0" name="Layer">&quot;Block&quot;</param>
                                    <param id="1" name="Visibility">0</param>
                                </action>
                                <action id="8" name="Set unfocused" sid="918258424503519" type="chkBlock" />
                            </actions>
                        </event-block>
                        <comment>Show or hide weather in map editor</comment>
                        <event-block sid="747147289168483">
                            <conditions>
                                <condition id="1" name="Is checked" sid="846639642058061" type="chkFX" />
                            </conditions>
                            <actions>
                                <action id="-4" name="Set layer visible" sid="541965494214454" type="System">
                                    <param id="0" name="Layer">&quot;Weather&quot;</param>
                                    <param id="1" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="534357506054419">
                            <conditions>
                                <condition id="-22" name="Else" sid="897983560205090" type="System" />
                            </conditions>
                            <actions>
                                <action id="-4" name="Set layer visible" sid="420314501199652" type="System">
                                    <param id="0" name="Layer">&quot;Weather&quot;</param>
                                    <param id="1" name="Visibility">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="371585182762082" title="Coordinates">
                    <sub-events>
                        <comment>Update coordinates and location of tile incicator</comment>
                        <event-block sid="565853409456677">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="806228502044934" type="System">
                                    <param id="0" name="First value">Mouse.Y</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">32</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="524184847186165" type="System">
                                    <param id="0" name="First value">Mouse.Y</param>
                                    <param id="1" name="Comparison">2</param>
                                    <param id="2" name="Second value">620</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="114825211527682" type="System">
                                    <param id="0" name="First value">Mouse.X</param>
                                    <param id="1" name="Comparison">4</param>
                                    <param id="2" name="Second value">32</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="367539568423673" type="System">
                                    <param id="0" name="First value">Mouse.X</param>
                                    <param id="1" name="Comparison">2</param>
                                    <param id="2" name="Second value">1240</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="198302203447157" type="tileIndicator">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                                <action id="0" name="Set text" sid="956056988391730" type="txtCord">
                                    <param id="0" name="Text">&quot;X: &quot; &amp; zeropad(tilemap.PositionToTileX(Mouse.X(&quot;Layer 1&quot;)),2) &amp; &quot; Y: &quot; &amp; zeropad(tilemap.PositionToTileY(Mouse.Y(&quot;Layer 1&quot;)),2)</param>
                                </action>
                                <action id="-3" name="Set position" sid="231707715202143" type="tileIndicator">
                                    <param id="0" name="X">tilemap.TileToPositionX(tilemap.PositionToTileX(Mouse.X(&quot;Layer 1&quot;))) - 16</param>
                                    <param id="1" name="Y">tilemap.TileToPositionY(tilemap.PositionToTileY(Mouse.Y(&quot;Layer 1&quot;))) - 16</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="834846500142938">
                            <conditions>
                                <condition id="-22" name="Else" sid="336541029762639" type="System" />
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="884089599725749" type="tileIndicator">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="479655386442208" title="Playtest">
                    <sub-events>
                        <event-block sid="478155433547414">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="469419148807944" type="System">
                                    <param id="0" name="Variable">testMap</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">1</param>
                                </condition>
                                <condition id="-4" name="Trigger once while true" sid="331697255986665" type="System" />
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="918513028221605" type="Function">
                                    <param id="0" name="Name">&quot;playEffects&quot;</param>
                                    <param id="1" name="Parameter {n}">weatherSelect{###}fog.show</param>
                                </action>
                                <action id="-12" name="Set group active" sid="230551992714909" type="System">
                                    <param id="0" name="Group name">&quot;EDITOR&quot;</param>
                                    <param id="1" name="State">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="155677010660966" type="System">
                                    <param id="0" name="Variable">oldX</param>
                                    <param id="1" name="Value">playerX</param>
                                </action>
                                <action id="-9" name="Set value" sid="597739124017267" type="System">
                                    <param id="0" name="Variable">oldY</param>
                                    <param id="1" name="Value">playerY</param>
                                </action>
                                <action id="-15" name="Set visible" sid="674103081601867" type="playerTile">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                                <action id="-3" name="Set position" sid="969494025345568" type="player">
                                    <param id="0" name="X">playerTile.TileToPositionX(playerX)</param>
                                    <param id="1" name="Y">playerTile.TileToPositionY(playerY)</param>
                                </action>
                                <action id="-15" name="Set visible" sid="178881533551157" type="grid">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                                <action id="0" name="Set text" sid="546472566733630" type="btnPlay">
                                    <param id="0" name="Text">&quot;EXIT&quot;</param>
                                </action>
                                <action id="-4" name="Set layer visible" sid="508531208339274" type="System">
                                    <param id="0" name="Layer">&quot;Block&quot;</param>
                                    <param id="1" name="Visibility">0</param>
                                </action>
                                <action id="-12" name="Set group active" sid="578347889845927" type="System">
                                    <param id="0" name="Group name">&quot;TEST MAP&quot;</param>
                                    <param id="1" name="State">1</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="611125585245457" type="btnPlay">
                                    <param id="0" name="Instance variable">isPlaying</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-4" name="Set layer visible" sid="319931161353082" type="System">
                                    <param id="0" name="Layer">&quot;Weather&quot;</param>
                                    <param id="1" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="513940117310284">
                            <conditions>
                                <condition id="-14" name="Compare variable" sid="869767544653542" type="System">
                                    <param id="0" name="Variable">testMap</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">2</param>
                                </condition>
                                <condition id="-4" name="Trigger once while true" sid="117331622358439" type="System" />
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="954803767780675" type="Function">
                                    <param id="0" name="Name">&quot;playEffects&quot;</param>
                                    <param id="1" name="Parameter {n}">0</param>
                                </action>
                                <action id="-15" name="Set visible" sid="495491661763978" type="playerTile">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                                <action id="-3" name="Set position" sid="202150972966579" type="player">
                                    <param id="0" name="X">-64</param>
                                    <param id="1" name="Y">-64</param>
                                </action>
                                <action id="0" name="Set text" sid="180885700930010" type="btnPlay">
                                    <param id="0" name="Text">&quot;PLAY&quot;</param>
                                </action>
                                <action id="-4" name="Set layer visible" sid="310310396375270" type="System">
                                    <param id="0" name="Layer">&quot;Block&quot;</param>
                                    <param id="1" name="Visibility">1</param>
                                </action>
                                <action id="-12" name="Set group active" sid="249869472151521" type="System">
                                    <param id="0" name="Group name">&quot;TEST MAP&quot;</param>
                                    <param id="1" name="State">0</param>
                                </action>
                                <action id="-12" name="Set group active" sid="244752592824260" type="System">
                                    <param id="0" name="Group name">&quot;EDITOR&quot;</param>
                                    <param id="1" name="State">1</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="228314361829020" type="btnPlay">
                                    <param id="0" name="Instance variable">isPlaying</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="253573821721860">
                                    <conditions>
                                        <condition id="1" inverted="1" name="Is checked" sid="781161143211828" type="chkFX" />
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set layer visible" sid="507487748853037" type="System">
                                            <param id="0" name="Layer">&quot;Weather&quot;</param>
                                            <param id="1" name="Visibility">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="493452291369945" title="Mode">
                    <sub-events>
                        <comment>Change editor mode from tile mode to object mode</comment>
                        <event-block sid="627945948995786">
                            <conditions>
                                <condition id="3" name="On key released" sid="519160479378589" type="Keyboard">
                                    <param id="0" name="Key">16</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="384076675550702">
                                    <conditions>
                                        <condition id="0" name="Compare selection" sid="868695630797425" type="modeList">
                                            <param id="0" name="Comparison">0</param>
                                            <param id="1" name="Index">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set selection" sid="558397316412599" type="modeList">
                                            <param id="0" name="Index">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="100305621074076">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="939341300058077" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set selection" sid="732181459601880" type="modeList">
                                            <param id="0" name="Index">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="263516697182029">
                            <conditions>
                                <condition id="0" name="Compare selection" sid="450254262620314" type="modeList">
                                    <param id="0" name="Comparison">0</param>
                                    <param id="1" name="Index">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-12" name="Set group active" sid="585575868998687" type="System">
                                    <param id="0" name="Group name">&quot;Map&quot;</param>
                                    <param id="1" name="State">1</param>
                                </action>
                                <action behavior="DragDrop" id="0" name="Set enabled" sid="131092510284926" type="npc">
                                    <param id="0" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="343128146098965">
                            <conditions>
                                <condition id="-22" name="Else" sid="593424182651229" type="System" />
                            </conditions>
                            <actions>
                                <action id="-12" name="Set group active" sid="642158151408166" type="System">
                                    <param id="0" name="Group name">&quot;Map&quot;</param>
                                    <param id="1" name="State">0</param>
                                </action>
                                <action behavior="DragDrop" id="0" name="Set enabled" sid="732923055566182" type="npc">
                                    <param id="0" name="State">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <event-group description="" sid="896610515492023" title="Effects">
                    <sub-events>
                        <event-block sid="592707961458123">
                            <conditions>
                                <condition id="0" name="On function" sid="995058673891725" type="Function">
                                    <param id="0" name="Name">&quot;playEffects&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>This function requires two parameters:&#x0D;&#x0A;- First one is weather, and it can be set to: no weather (0), rain (1) and snow (2)&#x0D;&#x0A;- Second one is used to set the fog on or off</comment>
                                <event-block sid="487323785427557">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="885296505436410" type="System">
                                            <param id="0" name="First value">Function.Param(0)</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Second value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="18" name="Set timeout" sid="763852858180212" type="weather">
                                            <param id="0" name="Timeout">0</param>
                                        </action>
                                        <action id="0" name="Set spraying" sid="988130018475011" type="partRain">
                                            <param id="0" name="State">0</param>
                                        </action>
                                        <action id="0" name="Set spraying" sid="474589203099039" type="partSnow">
                                            <param id="0" name="State">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="172943492361428">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="181874267659814" type="System" />
                                        <condition id="-8" name="Compare two values" sid="523536653474834" type="System">
                                            <param id="0" name="First value">Function.Param(0)</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Second value">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set spraying" sid="900084279019491" type="partRain">
                                            <param id="0" name="State">1</param>
                                        </action>
                                        <action id="18" name="Set timeout" sid="396192461878743" type="partRain">
                                            <param id="0" name="Timeout">0.55</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="427052266603701">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="583151986148295" type="System" />
                                        <condition id="-8" name="Compare two values" sid="708345063705561" type="System">
                                            <param id="0" name="First value">Function.Param(0)</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Second value">2</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set spraying" sid="414750308432572" type="partSnow">
                                            <param id="0" name="State">1</param>
                                        </action>
                                        <action id="18" name="Set timeout" sid="448240338559161" type="partSnow">
                                            <param id="0" name="Timeout">15</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="428586281885772">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="710858745772827" type="System">
                                            <param id="0" name="First value">Function.Param(1)</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Second value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-16" name="Set opacity" sid="253379685261793" type="fog">
                                            <param id="0" name="Opacity">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="992676599231978">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="782806812578451" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-16" name="Set opacity" sid="311765071907429" type="fog">
                                            <param id="0" name="Opacity">fogTransparency.Value</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="915082688885781">
                            <conditions>
                                <condition id="1" name="On selection changed" sid="642804588334195" type="weatherList" />
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="179019687733892" type="Function">
                                    <param id="0" name="Name">&quot;playEffects&quot;</param>
                                    <param id="1" name="Parameter {n}">0</param>
                                </action>
                                <action id="-9" name="Set value" sid="841705881290472" type="System">
                                    <param id="0" name="Variable">weatherSelect</param>
                                    <param id="1" name="Value">weatherList.SelectedIndex</param>
                                </action>
                                <action id="0" name="Call function" sid="596654581708128" type="Function">
                                    <param id="0" name="Name">&quot;playEffects&quot;</param>
                                    <param id="1" name="Parameter {n}">weatherSelect{###}fog.show</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="260410612076894">
                            <conditions>
                                <condition id="2" name="On changed" sid="870803068638333" type="weatherIntensity" />
                            </conditions>
                            <actions>
                                <action id="1" name="Set rate" sid="472349418781129" type="weather">
                                    <param id="0" name="Rate">weatherIntensity.Value</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="967710119502280">
                            <conditions>
                                <condition id="0" name="Compare selection" sid="367453530147459" type="weatherList">
                                    <param id="0" name="Comparison">0</param>
                                    <param id="1" name="Index">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="7" name="Set enabled" sid="250468396091210" type="weatherIntensity">
                                    <param id="0" name="Mode">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="430370783743167">
                            <conditions>
                                <condition id="-22" name="Else" sid="428961518624577" type="System" />
                            </conditions>
                            <actions>
                                <action id="7" name="Set enabled" sid="844999203326487" type="weatherIntensity">
                                    <param id="0" name="Mode">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="990697770786302">
                            <conditions>
                                <condition id="0" name="Compare selection" sid="511968327901736" type="fogList">
                                    <param id="0" name="Comparison">0</param>
                                    <param id="1" name="Index">0</param>
                                </condition>
                                <condition id="-4" name="Trigger once while true" sid="723726515407028" type="System" />
                            </conditions>
                            <actions>
                                <action id="7" name="Set enabled" sid="329386743044616" type="fogTransparency">
                                    <param id="0" name="Mode">0</param>
                                </action>
                                <action id="7" name="Set enabled" sid="214360879669478" type="fogSpeed">
                                    <param id="0" name="Mode">0</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="328332540365334" type="fog">
                                    <param id="0" name="Instance variable">show</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="0" name="Call function" sid="809492021951829" type="Function">
                                    <param id="0" name="Name">&quot;playEffects&quot;</param>
                                    <param id="1" name="Parameter {n}">weatherSelect{###}fog.show</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="720660497808562">
                            <conditions>
                                <condition id="-22" name="Else" sid="418619639552700" type="System" />
                                <condition id="0" name="Compare selection" sid="873207202802916" type="fogList">
                                    <param id="0" name="Comparison">0</param>
                                    <param id="1" name="Index">1</param>
                                </condition>
                                <condition id="-4" name="Trigger once while true" sid="481597792503933" type="System" />
                            </conditions>
                            <actions>
                                <action id="7" name="Set enabled" sid="142629332337736" type="fogTransparency">
                                    <param id="0" name="Mode">1</param>
                                </action>
                                <action id="7" name="Set enabled" sid="527663421856446" type="fogSpeed">
                                    <param id="0" name="Mode">1</param>
                                </action>
                                <action id="-13" name="Set boolean" sid="702725212774736" type="fog">
                                    <param id="0" name="Instance variable">show</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="0" name="Call function" sid="704671555385002" type="Function">
                                    <param id="0" name="Name">&quot;playEffects&quot;</param>
                                    <param id="1" name="Parameter {n}">weatherSelect{###}fog.show</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="410384422944915">
                            <conditions>
                                <condition id="2" name="On changed" sid="572152483573229" type="fogTransparency" />
                                <condition id="-8" name="Is boolean instance variable set" sid="191537875625012" type="fog">
                                    <param id="0" name="Instance variable">show</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-16" name="Set opacity" sid="601621758602991" type="fog">
                                    <param id="0" name="Opacity">fogTransparency.Value</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="271695905190723">
                            <conditions>
                                <condition id="2" name="On changed" sid="582955405012932" type="fogSpeed" />
                                <condition id="-8" name="Is boolean instance variable set" sid="285734987524497" type="fog">
                                    <param id="0" name="Instance variable">show</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="216432650053709" type="fog">
                                    <param id="0" name="Instance variable">speed</param>
                                    <param id="1" name="Value">fogSpeed.Value</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="328986025414861">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="355872705242402" type="fog">
                                    <param id="0" name="Instance variable">show</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-5" name="Set width" sid="365300840628723" type="fog">
                                    <param id="0" name="Width">Self.Width+self.speed+1*dt</param>
                                </action>
                                <action id="-1" name="Set X" sid="174095612369732" type="fog">
                                    <param id="0" name="X">Self.X-Self.speed-1*dt</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
        <event-group description="" sid="368410936351932" title="EDITOR">
            <sub-events>
                <event-group description="" sid="510409629538318" title="NPC Creator">
                    <sub-events>
                        <event-group description="" sid="180966519916040" title="Create NPC">
                            <sub-events>
                                <comment>Store names from the text file inside game</comment>
                                <event-block sid="503754546994444">
                                    <conditions>
                                        <condition id="0" name="On completed" sid="807082709019124" type="AJAX">
                                            <param id="0" name="Tag">&quot;names&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="356402403407877" type="System">
                                            <param id="0" name="Variable">names</param>
                                            <param id="1" name="Value">AJAX.LastData</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="679016677243272">
                                    <conditions>
                                        <condition id="0" name="On clicked" sid="717788981491530" type="btnRNDname" />
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Set text" sid="800850562805777" type="inputNPCname">
                                            <param id="0" name="Text">tokenat(names,int(random(0,4946)),&quot;,&quot;)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="949410438074804">
                                    <conditions>
                                        <condition id="6" name="On object clicked" sid="698188467200825" type="Mouse">
                                            <param id="0" name="Mouse button">0</param>
                                            <param id="1" name="Click type">0</param>
                                            <param id="2" name="Object clicked">arrowNPC</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="931543745950377">
                                            <conditions>
                                                <condition id="3" name="Compare frame" sid="237205372613658" type="arrowNPC">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Number">0</param>
                                                </condition>
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="243277674657185">
                                                    <conditions>
                                                        <condition id="3" name="Compare frame" sid="149398766731416" type="npcGraphic">
                                                            <param id="0" name="Comparison">4</param>
                                                            <param id="1" name="Number">0</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="5" name="Set frame" sid="735915705759688" type="npcGraphic">
                                                            <param id="0" name="Frame number">npcGraphic.AnimationFrame-1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="894646703972312">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="872456725621870" type="System" />
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="761210297040307">
                                                    <conditions>
                                                        <condition id="3" name="Compare frame" sid="933706127336773" type="npcGraphic">
                                                            <param id="0" name="Comparison">2</param>
                                                            <param id="1" name="Number">177</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="5" name="Set frame" sid="409326050860055" type="npcGraphic">
                                                            <param id="0" name="Frame number">npcGraphic.AnimationFrame+1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="302004220365259">
                                    <conditions>
                                        <condition id="0" name="On clicked" sid="619503551407975" type="btnNPCcreate" />
                                        <condition id="3" name="Compare frame" sid="896972853487574" type="npcGraphic">
                                            <param id="0" name="Comparison">1</param>
                                            <param id="1" name="Number">0</param>
                                        </condition>
                                        <condition id="0" inverted="1" name="Compare text" sid="692001486708513" type="inputNPCname">
                                            <param id="0" name="Text">&quot;&quot;</param>
                                            <param id="1" name="Case">0</param>
                                        </condition>
                                        <condition id="0" inverted="1" name="Compare text" sid="307527289411693" type="inputNPCx">
                                            <param id="0" name="Text">&quot;&quot;</param>
                                            <param id="1" name="Case">0</param>
                                        </condition>
                                        <condition id="0" inverted="1" name="Compare text" sid="769184938626801" type="inputNPCy">
                                            <param id="0" name="Text">&quot;&quot;</param>
                                            <param id="1" name="Case">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Create object" sid="759731260503105" type="System">
                                            <param id="0" name="Object to create">npc</param>
                                            <param id="1" name="Layer">&quot;Player&quot;</param>
                                            <param id="2" name="X">playerTile.TileToPositionX(int(inputNPCx.Text))</param>
                                            <param id="3" name="Y">playerTile.TileToPositionY(int(inputNPCy.Text))</param>
                                        </action>
                                        <action id="5" name="Set frame" sid="496003150504022" type="npc">
                                            <param id="0" name="Frame number">npcGraphic.AnimationFrame</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="691393166509122" type="npc">
                                            <param id="0" name="Instance variable">id</param>
                                            <param id="1" name="Value">Self.IID</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="153940258275312" type="npc">
                                            <param id="0" name="Instance variable">name</param>
                                            <param id="1" name="Value">inputNPCname.Text</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="667554072171827" type="npc">
                                            <param id="0" name="Instance variable">type</param>
                                            <param id="1" name="Value">npcType.SelectedIndex = 0 ? &quot;npc&quot; : &quot;enemy&quot;</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="781512579139186" type="npc">
                                            <param id="0" name="Instance variable">posX</param>
                                            <param id="1" name="Value">int(inputNPCx.Text)</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="426414900587489" type="npc">
                                            <param id="0" name="Instance variable">posY</param>
                                            <param id="1" name="Value">int(inputNPCy.Text)</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="373252111213792">
                                            <conditions>
                                                <condition id="1" name="Is checked" sid="214519862218879" type="btnNPCquest" />
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="922022294982830" type="npc">
                                                    <param id="0" name="Instance variable">hasQuest</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="198806087436044">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="883496839430615" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="765070246140834" type="npc">
                                                    <param id="0" name="Instance variable">hasQuest</param>
                                                    <param id="1" name="Value">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="834144598107958">
                                            <conditions>
                                                <condition id="0" name="Compare selection" sid="885455093033655" type="npcType">
                                                    <param id="0" name="Comparison">0</param>
                                                    <param id="1" name="Index">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="883194188894776" type="npc">
                                                    <param id="0" name="Instance variable">type</param>
                                                    <param id="1" name="Value">&quot;npc&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="438353429484037">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="891572389787572" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="318140290399998" type="npc">
                                                    <param id="0" name="Instance variable">type</param>
                                                    <param id="1" name="Value">&quot;enemy&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                        <event-group description="" sid="379125177878089" title="Edit NPC">
                            <sub-events>
                                <comment>Set position of NPC on the grid</comment>
                                <event-block sid="669552107944511">
                                    <conditions>
                                        <condition behavior="DragDrop" id="0" name="Is dragging" sid="575942179069098" type="npc" />
                                        <condition id="0" name="Compare selection" sid="979394913579721" type="modeList">
                                            <param id="0" name="Comparison">0</param>
                                            <param id="1" name="Index">1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="383419650908383" type="npc">
                                            <param id="0" name="Instance variable">posX</param>
                                            <param id="1" name="Value">tilemap.PositionToTileX(Mouse.X(&quot;Layer 1&quot;))</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="184821579538054" type="npc">
                                            <param id="0" name="Instance variable">posY</param>
                                            <param id="1" name="Value">tilemap.PositionToTileY(Mouse.Y(&quot;Layer 1&quot;))</param>
                                        </action>
                                        <action id="-3" name="Set position" sid="799816480169335" type="npc">
                                            <param id="0" name="X">tilemap.SnapX(Self.X)</param>
                                            <param id="1" name="Y">tilemap.SnapX(Self.Y)</param>
                                        </action>
                                        <action id="0" name="Set text" sid="271357403842481" type="inputNPCx">
                                            <param id="0" name="Text">str(npc.posX)</param>
                                        </action>
                                        <action id="0" name="Set text" sid="176990900208427" type="inputNPCy">
                                            <param id="0" name="Text">str(npc.posY)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>Select NPC</comment>
                                <event-block sid="778998853485231">
                                    <conditions>
                                        <condition id="6" name="On object clicked" sid="142237946146193" type="Mouse">
                                            <param id="0" name="Mouse button">0</param>
                                            <param id="1" name="Click type">0</param>
                                            <param id="2" name="Object clicked">npc</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="5" name="Set frame" sid="646308520076549" type="npcGraphic">
                                            <param id="0" name="Frame number">npc.AnimationFrame</param>
                                        </action>
                                        <action id="0" name="Set text" sid="359772506610783" type="inputNPCname">
                                            <param id="0" name="Text">npc.name</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="118147328793186" type="System">
                                            <param id="0" name="Variable">selectedNPC</param>
                                            <param id="1" name="Value">npc.id</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="659871731117954">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="908060212460194" type="npc">
                                                    <param id="0" name="Instance variable">type</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;npc&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Set selection" sid="366629062372732" type="npcType">
                                                    <param id="0" name="Index">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="375426459872289">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="754753531217801" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Set selection" sid="273266256583266" type="npcType">
                                                    <param id="0" name="Index">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="129518699992519">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="110250650479277" type="npc">
                                                    <param id="0" name="Instance variable">hasQuest</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">1</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="6" name="Set checked" sid="800660661575452" type="btnNPCquest">
                                                    <param id="0" name="State">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="445871628361408">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="349828890652289" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="6" name="Set checked" sid="254891990454188" type="btnNPCquest">
                                                    <param id="0" name="State">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <comment>Deselect NPC</comment>
                                <event-block sid="544901783155466">
                                    <conditions>
                                        <condition id="1" name="On any click" sid="413037467230834" type="Mouse" />
                                        <condition id="7" inverted="1" name="Cursor is over object" sid="711529709253877" type="Mouse">
                                            <param id="0" name="Object">npc</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="879443133118756" type="System">
                                            <param id="0" name="Variable">selectedNPC</param>
                                            <param id="1" name="Value">-1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>Edit currently selected NPC</comment>
                                <event-block sid="360663073197029">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="798839047606699" type="System">
                                            <param id="0" name="Variable">selectedNPC</param>
                                            <param id="1" name="Comparison">1</param>
                                            <param id="2" name="Value">-1</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block any="1" sid="852660281152558">
                                            <conditions>
                                                <condition id="1" name="On text changed" sid="180108836364752" type="inputNPCname" />
                                                <condition id="1" name="On text changed" sid="816668351891229" type="inputNPCx" />
                                                <condition id="1" name="On text changed" sid="499593669289094" type="inputNPCy" />
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="378626022327114">
                                                    <conditions>
                                                        <condition id="-34" name="Pick by evaluate" sid="540780651254158" type="System">
                                                            <param id="0" name="Object">npc</param>
                                                            <param id="1" name="Expression">npc.id = selectedNPC</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-10" name="Set value" sid="102421399246459" type="npc">
                                                            <param id="0" name="Instance variable">name</param>
                                                            <param id="1" name="Value">inputNPCname.Text</param>
                                                        </action>
                                                        <action id="-10" name="Set value" sid="780081442676072" type="npc">
                                                            <param id="0" name="Instance variable">posX</param>
                                                            <param id="1" name="Value">int(inputNPCx.Text)</param>
                                                        </action>
                                                        <action id="-10" name="Set value" sid="110681762199546" type="npc">
                                                            <param id="0" name="Instance variable">posY</param>
                                                            <param id="1" name="Value">int(inputNPCy.Text)</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="488735411422611">
                                            <conditions>
                                                <condition id="1" name="On selection changed" sid="967510744308162" type="npcType" />
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="433679088870522">
                                                    <conditions>
                                                        <condition id="0" name="Compare selection" sid="965141247866456" type="npcType">
                                                            <param id="0" name="Comparison">0</param>
                                                            <param id="1" name="Index">0</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <event-block sid="788499324574951">
                                                            <conditions>
                                                                <condition id="-34" name="Pick by evaluate" sid="310018626400795" type="System">
                                                                    <param id="0" name="Object">npc</param>
                                                                    <param id="1" name="Expression">npc.id = selectedNPC</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-10" name="Set value" sid="280983154843672" type="npc">
                                                                    <param id="0" name="Instance variable">type</param>
                                                                    <param id="1" name="Value">&quot;npc&quot;</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                                <event-block sid="954729591360361">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="480189434820643" type="System" />
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <event-block sid="766141999711567">
                                                            <conditions>
                                                                <condition id="-34" name="Pick by evaluate" sid="526207180749911" type="System">
                                                                    <param id="0" name="Object">npc</param>
                                                                    <param id="1" name="Expression">npc.id = selectedNPC</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-10" name="Set value" sid="811177859213472" type="npc">
                                                                    <param id="0" name="Instance variable">type</param>
                                                                    <param id="1" name="Value">&quot;enemy&quot;</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="590145505891284">
                                            <conditions>
                                                <condition id="1" name="Is checked" sid="121026217321117" type="btnNPCquest" />
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="831830680342483">
                                                    <conditions>
                                                        <condition id="-34" name="Pick by evaluate" sid="199234549136146" type="System">
                                                            <param id="0" name="Object">npc</param>
                                                            <param id="1" name="Expression">npc.id = selectedNPC</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-10" name="Set value" sid="146426902819787" type="npc">
                                                            <param id="0" name="Instance variable">hasQuest</param>
                                                            <param id="1" name="Value">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="188242627667761">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="882201633304753" type="System" />
                                            </conditions>
                                            <actions />
                                            <sub-events>
                                                <event-block sid="997439739788642">
                                                    <conditions>
                                                        <condition id="-34" name="Pick by evaluate" sid="581223944919693" type="System">
                                                            <param id="0" name="Object">npc</param>
                                                            <param id="1" name="Expression">npc.id = selectedNPC</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-10" name="Set value" sid="408204242131258" type="npc">
                                                            <param id="0" name="Instance variable">hasQuest</param>
                                                            <param id="1" name="Value">0</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block any="1" sid="695481052917549">
                                    <conditions>
                                        <condition id="0" name="On key pressed" sid="229119865024832" type="Keyboard">
                                            <param id="0" name="Key">46</param>
                                        </condition>
                                        <condition id="0" name="On clicked" sid="568592123696864" type="btnNPCdelete" />
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="540387008242940">
                                            <conditions>
                                                <condition id="-34" name="Pick by evaluate" sid="751958281859564" type="System">
                                                    <param id="0" name="Object">npc</param>
                                                    <param id="1" name="Expression">npc.id = selectedNPC</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-9" name="Destroy" sid="351825374485061" type="npc" />
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-group>
                    </sub-events>
                </event-group>
                <event-group description="" sid="448034883784246" title="Map">
                    <sub-events>
                        <event-group description="" sid="533216361988278" title="Map - Mouse">
                            <sub-events>
                                <event-group description="DO NOT ACTIVATE IT! THIS SECTION IS ACTIVATED WHEN NEEDED" inactive="1" sid="414347260854915" title="Place tile">
                                    <sub-events>
                                        <event-group description="" sid="150972689506700" title="Player">
                                            <sub-events>
                                                <comment>Set player location</comment>
                                                <event-block sid="338973069177643">
                                                    <conditions>
                                                        <condition id="-14" name="Compare variable" sid="998887479305412" type="System">
                                                            <param id="0" name="Variable">index</param>
                                                            <param id="1" name="Comparison">0</param>
                                                            <param id="2" name="Value">999</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="-12" name="Set group active" sid="967684334154618" type="System">
                                                            <param id="0" name="Group name">&quot;Tile&quot;</param>
                                                            <param id="1" name="State">0</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="904612686194235">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="496744408530023" type="System" />
                                                    </conditions>
                                                    <actions>
                                                        <action id="-12" name="Set group active" sid="676979751325689" type="System">
                                                            <param id="0" name="Group name">&quot;Tile&quot;</param>
                                                            <param id="1" name="State">1</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="421719855958860">
                                                    <conditions>
                                                        <condition id="6" name="On object clicked" sid="273288612698610" type="Mouse">
                                                            <param id="0" name="Mouse button">0</param>
                                                            <param id="1" name="Click type">0</param>
                                                            <param id="2" name="Object clicked">playerTile</param>
                                                        </condition>
                                                        <condition id="-14" name="Compare variable" sid="363506006132971" type="System">
                                                            <param id="0" name="Variable">index</param>
                                                            <param id="1" name="Comparison">0</param>
                                                            <param id="2" name="Value">999</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <event-block sid="617847842215407">
                                                            <conditions>
                                                                <condition id="-14" name="Compare variable" sid="119548727198533" type="System">
                                                                    <param id="0" name="Variable">playerPlaced</param>
                                                                    <param id="1" name="Comparison">0</param>
                                                                    <param id="2" name="Value">0</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions>
                                                                <action id="-9" name="Set value" sid="163124563064529" type="System">
                                                                    <param id="0" name="Variable">playerPlaced</param>
                                                                    <param id="1" name="Value">1</param>
                                                                </action>
                                                                <action id="-9" name="Set value" sid="722177389861720" type="System">
                                                                    <param id="0" name="Variable">playerX</param>
                                                                    <param id="1" name="Value">playerTile.PositionToTileX(Mouse.X(&quot;Player&quot;))</param>
                                                                </action>
                                                                <action id="-9" name="Set value" sid="812462444592828" type="System">
                                                                    <param id="0" name="Variable">playerY</param>
                                                                    <param id="1" name="Value">playerTile.PositionToTileY(Mouse.Y(&quot;Player&quot;))</param>
                                                                </action>
                                                                <action id="1" name="Set tile" sid="787186084987314" type="playerTile">
                                                                    <param id="0" name="Tile X">playerX</param>
                                                                    <param id="1" name="Tile Y">playerY</param>
                                                                    <param id="2" name="Tile">1</param>
                                                                    <param id="3" name="State">0</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                        <event-block sid="698447162178438">
                                                            <conditions>
                                                                <condition id="-22" name="Else" sid="466738096774962" type="System" />
                                                            </conditions>
                                                            <actions>
                                                                <action id="0" name="Erase tile" sid="936854439258514" type="playerTile">
                                                                    <param id="0" name="Tile X">playerX</param>
                                                                    <param id="1" name="Tile Y">playerY</param>
                                                                </action>
                                                                <action id="-9" name="Set value" sid="285296758133457" type="System">
                                                                    <param id="0" name="Variable">playerX</param>
                                                                    <param id="1" name="Value">playerTile.PositionToTileX(Mouse.X(&quot;Player&quot;))</param>
                                                                </action>
                                                                <action id="-9" name="Set value" sid="906162316842649" type="System">
                                                                    <param id="0" name="Variable">playerY</param>
                                                                    <param id="1" name="Value">playerTile.PositionToTileY(Mouse.Y(&quot;Player&quot;))</param>
                                                                </action>
                                                                <action id="1" name="Set tile" sid="715092418877134" type="playerTile">
                                                                    <param id="0" name="Tile X">playerX</param>
                                                                    <param id="1" name="Tile Y">playerY</param>
                                                                    <param id="2" name="Tile">1</param>
                                                                    <param id="3" name="State">0</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                            </sub-events>
                                        </event-group>
                                        <event-group description="" sid="631596307669910" title="Tile">
                                            <sub-events>
                                                <comment>Draw tile only on selected layer</comment>
                                                <event-block sid="673715859036073">
                                                    <conditions>
                                                        <condition id="2" name="Mouse button is down" sid="861905802408077" type="Mouse">
                                                            <param id="0" name="Mouse button">0</param>
                                                        </condition>
                                                        <condition id="7" name="Cursor is over object" sid="555364004816601" type="Mouse">
                                                            <param id="0" name="Object">tilemap</param>
                                                        </condition>
                                                        <condition id="-16" name="Is on layer" sid="482718992228390" type="tilemap">
                                                            <param id="0" name="Layer">layerList.SelectedText</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <event-block sid="316756490931874">
                                                            <conditions>
                                                                <condition id="-14" name="Compare variable" sid="532037193136933" type="System">
                                                                    <param id="0" name="Variable">index</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Value">755</param>
                                                                </condition>
                                                                <condition id="-14" name="Compare variable" sid="602489205064111" type="System">
                                                                    <param id="0" name="Variable">index</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Value">999</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions />
                                                            <sub-events>
                                                                <event-block sid="285213428250124">
                                                                    <conditions>
                                                                        <condition id="4" inverted="1" name="Compare selected item text" sid="231018744630837" type="layerList">
                                                                            <param id="0" name="Text to compare">&quot;Block&quot;</param>
                                                                            <param id="1" name="Case sensitivity">0</param>
                                                                        </condition>
                                                                    </conditions>
                                                                    <actions>
                                                                        <action id="-9" name="Set value" sid="761376497247740" type="System">
                                                                            <param id="0" name="Variable">tileX1</param>
                                                                            <param id="1" name="Value">Tilemap.PositionToTileX(Mouse.X(&quot;Layer 1&quot;))</param>
                                                                        </action>
                                                                        <action id="-9" name="Set value" sid="666426011535644" type="System">
                                                                            <param id="0" name="Variable">tileY1</param>
                                                                            <param id="1" name="Value">Tilemap.PositionToTileY(Mouse.Y(&quot;Layer 1&quot;))</param>
                                                                        </action>
                                                                        <action id="1" name="Set tile" sid="481084229713734" type="tilemap">
                                                                            <param id="0" name="Tile X">tileX1</param>
                                                                            <param id="1" name="Tile Y">tileY1</param>
                                                                            <param id="2" name="Tile">index</param>
                                                                            <param id="3" name="State">0</param>
                                                                        </action>
                                                                    </actions>
                                                                </event-block>
                                                                <event-block sid="521137610361673">
                                                                    <conditions>
                                                                        <condition id="-22" name="Else" sid="403717789818403" type="System" />
                                                                    </conditions>
                                                                    <actions>
                                                                        <action id="0" name="Alert" sid="315031749373113" type="Browser">
                                                                            <param id="0" name="Message">&quot;ERROR: You can&apos;t place graphic tile on Block layer.&quot;</param>
                                                                        </action>
                                                                    </actions>
                                                                </event-block>
                                                            </sub-events>
                                                        </event-block>
                                                        <event-block sid="117430250254574">
                                                            <conditions>
                                                                <condition id="-22" name="Else" sid="305521454949052" type="System" />
                                                                <condition id="-14" name="Compare variable" sid="454955108251836" type="System">
                                                                    <param id="0" name="Variable">index</param>
                                                                    <param id="1" name="Comparison">0</param>
                                                                    <param id="2" name="Value">755</param>
                                                                </condition>
                                                                <condition id="-14" name="Compare variable" sid="181318750410831" type="System">
                                                                    <param id="0" name="Variable">index</param>
                                                                    <param id="1" name="Comparison">1</param>
                                                                    <param id="2" name="Value">999</param>
                                                                </condition>
                                                            </conditions>
                                                            <actions />
                                                            <sub-events>
                                                                <event-block sid="706487343373051">
                                                                    <conditions>
                                                                        <condition id="4" name="Compare selected item text" sid="386649467860154" type="layerList">
                                                                            <param id="0" name="Text to compare">&quot;Block&quot;</param>
                                                                            <param id="1" name="Case sensitivity">0</param>
                                                                        </condition>
                                                                    </conditions>
                                                                    <actions>
                                                                        <action id="-9" name="Set value" sid="153602596568039" type="System">
                                                                            <param id="0" name="Variable">tileX1</param>
                                                                            <param id="1" name="Value">Tilemap.PositionToTileX(Mouse.X(&quot;Layer 1&quot;))</param>
                                                                        </action>
                                                                        <action id="-9" name="Set value" sid="957005986673551" type="System">
                                                                            <param id="0" name="Variable">tileY1</param>
                                                                            <param id="1" name="Value">Tilemap.PositionToTileY(Mouse.Y(&quot;Layer 1&quot;))</param>
                                                                        </action>
                                                                        <action id="1" name="Set tile" sid="283043267740051" type="tilemap">
                                                                            <param id="0" name="Tile X">tileX1</param>
                                                                            <param id="1" name="Tile Y">tileY1</param>
                                                                            <param id="2" name="Tile">index</param>
                                                                            <param id="3" name="State">0</param>
                                                                        </action>
                                                                    </actions>
                                                                </event-block>
                                                                <event-block sid="471289420454299">
                                                                    <conditions>
                                                                        <condition id="-22" name="Else" sid="723327490587342" type="System" />
                                                                    </conditions>
                                                                    <actions>
                                                                        <action id="0" name="Alert" sid="674536411603317" type="Browser">
                                                                            <param id="0" name="Message">&quot;ERROR: Block tile can only be placed on Block layer&quot;</param>
                                                                        </action>
                                                                    </actions>
                                                                </event-block>
                                                            </sub-events>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                            </sub-events>
                                        </event-group>
                                    </sub-events>
                                </event-group>
                                <comment>Select tile</comment>
                                <event-block sid="932967917408273">
                                    <conditions>
                                        <condition id="6" name="On object clicked" sid="691085658384050" type="Mouse">
                                            <param id="0" name="Mouse button">0</param>
                                            <param id="1" name="Click type">0</param>
                                            <param id="2" name="Object clicked">tileIndex</param>
                                        </condition>
                                        <condition id="0" name="Compare selection" sid="212831167964369" type="modeList">
                                            <param id="0" name="Comparison">0</param>
                                            <param id="1" name="Index">0</param>
                                        </condition>
                                        <condition id="-16" name="Is on layer" sid="355057774252747" type="tileIndex">
                                            <param id="0" name="Layer">tileList.SelectedText</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Destroy" sid="474349841764143" type="selector" />
                                        <action id="-9" name="Set value" sid="399873574363625" type="System">
                                            <param id="0" name="Variable">tileSelected</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="819168160778475" type="System">
                                            <param id="0" name="Variable">indexX</param>
                                            <param id="1" name="Value">tileIndex.PositionToTileX(Mouse.X(&quot;Layer 1&quot;))</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="616643035305673" type="System">
                                            <param id="0" name="Variable">indexY</param>
                                            <param id="1" name="Value">tileIndex.PositionToTileY(Mouse.Y(&quot;Layer 1&quot;))</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="401795935858594" type="System">
                                            <param id="0" name="Variable">index</param>
                                            <param id="1" name="Value">tileIndex.TileAt(indexX,indexY)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="105183713325910" type="System">
                                            <param id="0" name="Variable">selX</param>
                                            <param id="1" name="Value">tileIndex.TileToPositionX(indexX)</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="265433247030940" type="System">
                                            <param id="0" name="Variable">selY</param>
                                            <param id="1" name="Value">tileIndex.TileToPositionY(indexY)</param>
                                        </action>
                                        <action id="-12" name="Set group active" sid="613593019022921" type="System">
                                            <param id="0" name="Group name">&quot;Place tile&quot;</param>
                                            <param id="1" name="State">1</param>
                                        </action>
                                        <action id="-3" name="Create object" sid="284593463256508" type="System">
                                            <param id="0" name="Object to create">selector</param>
                                            <param id="1" name="Layer">&quot;Selector&quot;</param>
                                            <param id="2" name="X">selX</param>
                                            <param id="3" name="Y">selY</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="284367241268438">
                                    <conditions>
                                        <condition id="6" name="On object clicked" sid="209269883053620" type="Mouse">
                                            <param id="0" name="Mouse button">0</param>
                                            <param id="1" name="Click type">0</param>
                                            <param id="2" name="Object clicked">tileFunc</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Destroy" sid="327063173481916" type="selector" />
                                        <action id="-9" name="Set value" sid="767262256040876" type="System">
                                            <param id="0" name="Variable">tileSelected</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="785316270886837" type="System">
                                            <param id="0" name="Variable">selX</param>
                                            <param id="1" name="Value">tileFunc.X + 16</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="364190729288494" type="System">
                                            <param id="0" name="Variable">selY</param>
                                            <param id="1" name="Value">tileFunc.Y + 16</param>
                                        </action>
                                        <action id="-3" name="Create object" sid="149858836387182" type="System">
                                            <param id="0" name="Object to create">selector</param>
                                            <param id="1" name="Layer">&quot;Selector&quot;</param>
                                            <param id="2" name="X">selX</param>
                                            <param id="3" name="Y">selY</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="275537592464506" type="System">
                                            <param id="0" name="Variable">index</param>
                                            <param id="1" name="Value">tileFunc.id</param>
                                        </action>
                                        <action id="-12" name="Set group active" sid="823852623021913" type="System">
                                            <param id="0" name="Group name">&quot;Place tile&quot;</param>
                                            <param id="1" name="State">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>Delete tile</comment>
                                <event-block sid="847055764445414">
                                    <conditions>
                                        <condition id="2" name="Mouse button is down" sid="591456896500441" type="Mouse">
                                            <param id="0" name="Mouse button">2</param>
                                        </condition>
                                        <condition id="7" name="Cursor is over object" sid="269981519786267" type="Mouse">
                                            <param id="0" name="Object">tilemap</param>
                                        </condition>
                                        <condition id="-16" name="Is on layer" sid="737841343407091" type="tilemap">
                                            <param id="0" name="Layer">layerList.SelectedText</param>
                                        </condition>
                                        <condition id="0" name="Compare selection" sid="940634372506518" type="modeList">
                                            <param id="0" name="Comparison">0</param>
                                            <param id="1" name="Index">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="942438923725410" type="System">
                                            <param id="0" name="Variable">tileX1</param>
                                            <param id="1" name="Value">Tilemap.PositionToTileX(Mouse.X(&quot;Layer 1&quot;))</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="190832102142318" type="System">
                                            <param id="0" name="Variable">tileY1</param>
                                            <param id="1" name="Value">Tilemap.PositionToTileY(Mouse.Y(&quot;Layer 1&quot;))</param>
                                        </action>
                                        <action id="1" name="Set tile" sid="824341505806434" type="tilemap">
                                            <param id="0" name="Tile X">tileX1</param>
                                            <param id="1" name="Tile Y">tileY1</param>
                                            <param id="2" name="Tile">0</param>
                                            <param id="3" name="State">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>Rotate tile</comment>
                                <event-block sid="121959566135283">
                                    <conditions>
                                        <condition id="6" name="On object clicked" sid="277888582179245" type="Mouse">
                                            <param id="0" name="Mouse button">1</param>
                                            <param id="1" name="Click type">0</param>
                                            <param id="2" name="Object clicked">tilemap</param>
                                        </condition>
                                        <condition id="-16" name="Is on layer" sid="587322059235477" type="tilemap">
                                            <param id="0" name="Layer">layerList.SelectedText</param>
                                        </condition>
                                        <condition id="0" name="Compare selection" sid="258704543867865" type="modeList">
                                            <param id="0" name="Comparison">0</param>
                                            <param id="1" name="Index">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Set value" sid="602980666731699" type="System">
                                            <param id="0" name="Variable">tileX1</param>
                                            <param id="1" name="Value">Tilemap.PositionToTileX(Mouse.X(&quot;Layer 1&quot;))</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="402441761178587" type="System">
                                            <param id="0" name="Variable">tileY1</param>
                                            <param id="1" name="Value">Tilemap.PositionToTileY(Mouse.Y(&quot;Layer 1&quot;))</param>
                                        </action>
                                    </actions>
                                    <sub-events>
                                        <event-block sid="556633620559114">
                                            <conditions>
                                                <condition id="1" name="Compare tile state at" sid="831667238318539" type="tilemap">
                                                    <param id="0" name="Tile X">tileX1</param>
                                                    <param id="1" name="Tile Y">tileY1</param>
                                                    <param id="2" name="State">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="6" name="Set tile state" sid="446548136083969" type="tilemap">
                                                    <param id="0" name="Tile X">tileX1</param>
                                                    <param id="1" name="Tile Y">tileY1</param>
                                                    <param id="2" name="State">3</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="960941714073306">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="978380484569548" type="System" />
                                                <condition id="1" name="Compare tile state at" sid="569174816949944" type="tilemap">
                                                    <param id="0" name="Tile X">tileX1</param>
                                                    <param id="1" name="Tile Y">tileY1</param>
                                                    <param id="2" name="State">3</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="6" name="Set tile state" sid="322871734685775" type="tilemap">
                                                    <param id="0" name="Tile X">tileX1</param>
                                                    <param id="1" name="Tile Y">tileY1</param>
                                                    <param id="2" name="State">4</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="258053324654370">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="683415414270422" type="System" />
                                                <condition id="1" name="Compare tile state at" sid="946896267368114" type="tilemap">
                                                    <param id="0" name="Tile X">tileX1</param>
                                                    <param id="1" name="Tile Y">tileY1</param>
                                                    <param id="2" name="State">4</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="6" name="Set tile state" sid="386609943234258" type="tilemap">
                                                    <param id="0" name="Tile X">tileX1</param>
                                                    <param id="1" name="Tile Y">tileY1</param>
                                                    <param id="2" name="State">5</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="841568524859467">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="980294078935139" type="System" />
                                                <condition id="1" name="Compare tile state at" sid="482997976673299" type="tilemap">
                                                    <param id="0" name="Tile X">tileX1</param>
                                                    <param id="1" name="Tile Y">tileY1</param>
                                                    <param id="2" name="State">5</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="6" name="Set tile state" sid="363935742651751" type="tilemap">
                                                    <param id="0" name="Tile X">tileX1</param>
                                                    <param id="1" name="Tile Y">tileY1</param>
                                                    <param id="2" name="State">0</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <comment>Set preview icon that follows mouse, only when mouse enters working area</comment>
                                <event-block sid="811072835354215">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="127540030555779" type="System">
                                            <param id="0" name="Variable">tileSelected</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">1</param>
                                        </condition>
                                        <condition id="0" name="Compare selection" sid="456890388855256" type="modeList">
                                            <param id="0" name="Comparison">0</param>
                                            <param id="1" name="Index">0</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="373115776193873">
                                            <conditions>
                                                <condition id="-14" name="Compare variable" sid="143646933162561" type="System">
                                                    <param id="0" name="Variable">index</param>
                                                    <param id="1" name="Comparison">1</param>
                                                    <param id="2" name="Value">999</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-15" name="Set visible" sid="589714628343483" type="tilePreview">
                                                    <param id="0" name="Visibility">1</param>
                                                </action>
                                                <action id="1" name="Set tile" sid="961085213820626" type="tilePreview">
                                                    <param id="0" name="Tile X">0</param>
                                                    <param id="1" name="Tile Y">0</param>
                                                    <param id="2" name="Tile">index</param>
                                                    <param id="3" name="State">0</param>
                                                </action>
                                            </actions>
                                            <sub-events>
                                                <event-block sid="742348015417202">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="729677784639538" type="System">
                                                            <param id="0" name="First value">Mouse.Y</param>
                                                            <param id="1" name="Comparison">4</param>
                                                            <param id="2" name="Second value">32</param>
                                                        </condition>
                                                        <condition id="-8" name="Compare two values" sid="280789164924292" type="System">
                                                            <param id="0" name="First value">Mouse.Y</param>
                                                            <param id="1" name="Comparison">2</param>
                                                            <param id="2" name="Second value">620</param>
                                                        </condition>
                                                        <condition id="-8" name="Compare two values" sid="625380169161724" type="System">
                                                            <param id="0" name="First value">Mouse.X</param>
                                                            <param id="1" name="Comparison">4</param>
                                                            <param id="2" name="Second value">32</param>
                                                        </condition>
                                                        <condition id="-8" name="Compare two values" sid="887278317507398" type="System">
                                                            <param id="0" name="First value">Mouse.X</param>
                                                            <param id="1" name="Comparison">2</param>
                                                            <param id="2" name="Second value">1240</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <event-block sid="413856788812585">
                                                            <conditions>
                                                                <condition id="-1" name="Every tick" sid="621707294584846" type="System" />
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="810956506829726" type="tilePreview">
                                                                    <param id="0" name="X">Mouse.X(&quot;Layer 1&quot;) + 8</param>
                                                                    <param id="1" name="Y">Mouse.Y(&quot;Layer 1&quot;) + 8</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                                <event-block sid="608453220578236">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="629878277864899" type="System" />
                                                    </conditions>
                                                    <actions>
                                                        <action id="-15" name="Set visible" sid="822700575301588" type="tilePreview">
                                                            <param id="0" name="Visibility">0</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="992698716622823">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="599406181779032" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-15" name="Set visible" sid="690927714286519" type="playerPrev">
                                                    <param id="0" name="Visibility">1</param>
                                                </action>
                                            </actions>
                                            <sub-events>
                                                <event-block sid="910735771047840">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="188743885237969" type="System">
                                                            <param id="0" name="First value">Mouse.Y</param>
                                                            <param id="1" name="Comparison">4</param>
                                                            <param id="2" name="Second value">32</param>
                                                        </condition>
                                                        <condition id="-8" name="Compare two values" sid="798973328536293" type="System">
                                                            <param id="0" name="First value">Mouse.Y</param>
                                                            <param id="1" name="Comparison">2</param>
                                                            <param id="2" name="Second value">620</param>
                                                        </condition>
                                                        <condition id="-8" name="Compare two values" sid="394696548096645" type="System">
                                                            <param id="0" name="First value">Mouse.X</param>
                                                            <param id="1" name="Comparison">4</param>
                                                            <param id="2" name="Second value">32</param>
                                                        </condition>
                                                        <condition id="-8" name="Compare two values" sid="886676965182532" type="System">
                                                            <param id="0" name="First value">Mouse.X</param>
                                                            <param id="1" name="Comparison">2</param>
                                                            <param id="2" name="Second value">1240</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions />
                                                    <sub-events>
                                                        <event-block sid="770794091281324">
                                                            <conditions>
                                                                <condition id="-1" name="Every tick" sid="452183833788710" type="System" />
                                                            </conditions>
                                                            <actions>
                                                                <action id="-3" name="Set position" sid="810286089580319" type="playerPrev">
                                                                    <param id="0" name="X">Mouse.X(&quot;Layer 1&quot;) + 8</param>
                                                                    <param id="1" name="Y">Mouse.Y(&quot;Layer 1&quot;) + 8</param>
                                                                </action>
                                                            </actions>
                                                        </event-block>
                                                    </sub-events>
                                                </event-block>
                                                <event-block sid="223417969665509">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="309235974091098" type="System" />
                                                    </conditions>
                                                    <actions>
                                                        <action id="-15" name="Set visible" sid="778975796510650" type="playerPrev">
                                                            <param id="0" name="Visibility">0</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="191059480940397">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="126351996843625" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-15" name="Set visible" sid="603671673342657" type="tilePreview">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                        <action id="-15" name="Set visible" sid="234479913291370" type="playerPrev">
                                            <param id="0" name="Visibility">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-group>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
        <event-group description="" inactive="1" sid="576248343091732" title="TEST MAP">
            <sub-events>
                <event-group description="" sid="385065380247760" title="Grid movement">
                    <sub-events>
                        <event-block sid="635810698799378">
                            <conditions>
                                <condition id="1" name="On any key pressed" sid="558436734945492" type="Keyboard" />
                                <condition id="-7" name="Compare instance variable" sid="614886775439767" type="player">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">&quot;moving&quot;</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="790010671443958" type="Function">
                                    <param id="0" name="Name">&quot;setDirection&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="926609375833409">
                            <conditions>
                                <condition id="0" name="On function" sid="545441840743745" type="Function">
                                    <param id="0" name="Name">&quot;setDirection&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>In this first function, we just give the player an X and Y direction based on his input and set required animation</comment>
                                <event-block sid="504421640416932">
                                    <conditions />
                                    <actions>
                                        <action id="-10" name="Set value" sid="905613337462741" type="player">
                                            <param id="0" name="Instance variable">directionX</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="572085399663590" type="player">
                                            <param id="0" name="Instance variable">directionY</param>
                                            <param id="1" name="Value">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block any="1" sid="989785845725044">
                                    <conditions>
                                        <condition id="2" name="Key is down" sid="227214278685854" type="Keyboard">
                                            <param id="0" name="Key">65</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="352839604439213" type="player">
                                            <param id="0" name="Instance variable">directionX</param>
                                            <param id="1" name="Value">-1</param>
                                        </action>
                                        <action id="4" name="Set animation" sid="338745646057863" type="player">
                                            <param id="0" name="Animation">&quot;left&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="911810737896218">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="440693196666328" type="System" />
                                        <condition id="2" name="Key is down" sid="140092263431638" type="Keyboard">
                                            <param id="0" name="Key">68</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="482208913277129" type="player">
                                            <param id="0" name="Instance variable">directionX</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="4" name="Set animation" sid="172607734083162" type="player">
                                            <param id="0" name="Animation">&quot;right&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="828507005141885">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="283695878514991" type="System" />
                                        <condition id="2" name="Key is down" sid="440273906745187" type="Keyboard">
                                            <param id="0" name="Key">87</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="198057036189468" type="player">
                                            <param id="0" name="Instance variable">directionY</param>
                                            <param id="1" name="Value">-1</param>
                                        </action>
                                        <action id="4" name="Set animation" sid="725614535136300" type="player">
                                            <param id="0" name="Animation">&quot;up&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="773873786341178">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="132400973594123" type="System" />
                                        <condition id="2" name="Key is down" sid="878599960359631" type="Keyboard">
                                            <param id="0" name="Key">83</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="945479593556458" type="player">
                                            <param id="0" name="Instance variable">directionY</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                        <action id="4" name="Set animation" sid="275496272974577" type="player">
                                            <param id="0" name="Animation">&quot;down&quot;</param>
                                            <param id="1" name="From">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block any="1" sid="982788637449006">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="477407881906724" type="player">
                                            <param id="0" name="Instance variable">directionX</param>
                                            <param id="1" name="Comparison">1</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                        <condition id="-7" name="Compare instance variable" sid="495458002496292" type="player">
                                            <param id="0" name="Instance variable">directionY</param>
                                            <param id="1" name="Comparison">1</param>
                                            <param id="2" name="Value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="238528222947184" type="Function">
                                            <param id="0" name="Name">&quot;checkCollision&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="110901417458325">
                            <conditions>
                                <condition id="0" name="On function" sid="895444624833479" type="Function">
                                    <param id="0" name="Name">&quot;checkCollision&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>We check if the cell in the direction the player is moving towards contains a block tile. If not, moveTo function is called, which moves the character to the next cell.</comment>
                                <event-block any="1" sid="985675697042481">
                                    <conditions>
                                        <condition id="-33" name="Pick by comparison" sid="122402703489513" type="System">
                                            <param id="0" name="Object">tilemap</param>
                                            <param id="1" name="Expression">tilemap.LayerName</param>
                                            <param id="2" name="Comparison">0</param>
                                            <param id="3" name="Value">&quot;Block&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <comment>Player.currentCell + Player.direction gives us the coordinates of the cells the player wants to move to.</comment>
                                        <event-block any="1" sid="655963818653472">
                                            <conditions>
                                                <condition id="0" name="Compare tile at" sid="236790698657703" type="tilemap">
                                                    <param id="0" name="Tile X">playerX + player.directionX</param>
                                                    <param id="1" name="Tile Y">playerY + player.directionY</param>
                                                    <param id="2" name="Comparison">0</param>
                                                    <param id="3" name="Tile">755</param>
                                                </condition>
                                                <condition id="-8" name="Compare two values" sid="325030528172753" type="System">
                                                    <param id="0" name="First value">playerX + player.directionX</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">0</param>
                                                </condition>
                                                <condition id="-8" name="Compare two values" sid="271466245994212" type="System">
                                                    <param id="0" name="First value">playerX + player.directionX</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">37</param>
                                                </condition>
                                                <condition id="-8" name="Compare two values" sid="556757536700716" type="System">
                                                    <param id="0" name="First value">playerY + player.directionY</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">0</param>
                                                </condition>
                                                <condition id="-8" name="Compare two values" sid="461780049868157" type="System">
                                                    <param id="0" name="First value">playerY + player.directionY</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Second value">19</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-13" name="Set boolean" sid="252014897595825" type="player">
                                                    <param id="0" name="Instance variable">isColiding</param>
                                                    <param id="1" name="Value">1</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="206475522882422">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="913083199244991" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-13" name="Set boolean" sid="705886103964692" type="player">
                                                    <param id="0" name="Instance variable">isColiding</param>
                                                    <param id="1" name="Value">0</param>
                                                </action>
                                                <action id="0" name="Call function" sid="867269976189610" type="Function">
                                                    <param id="0" name="Name">&quot;moveTo&quot;</param>
                                                    <param id="1" name="Parameter {n}"></param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="487156897935586">
                            <conditions>
                                <condition id="0" name="On function" sid="916095556649530" type="Function">
                                    <param id="0" name="Name">&quot;moveTo&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <variable comment=" increase or decrease players movement speed with this variable" constant="0" name="moveTime" sid="352944576580916" static="0" type="number">0.25</variable>
                                <event-block sid="130030651288214">
                                    <conditions />
                                    <actions>
                                        <action id="-10" name="Set value" sid="166735054918884" type="player">
                                            <param id="0" name="Instance variable">startCellX</param>
                                            <param id="1" name="Value">playerX</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="398587001985500" type="player">
                                            <param id="0" name="Instance variable">startCellY</param>
                                            <param id="1" name="Value">playerY</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="320171240523539" type="System">
                                            <param id="0" name="Variable">playerX</param>
                                            <param id="1" name="Value">playerX + player.directionX</param>
                                        </action>
                                        <action id="-9" name="Set value" sid="796326136321977" type="System">
                                            <param id="0" name="Variable">playerY</param>
                                            <param id="1" name="Value">playerY + player.directionY</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="542639960446731">
                                    <conditions />
                                    <actions>
                                        <action id="-10" name="Set value" sid="776799980927686" type="player">
                                            <param id="0" name="Instance variable">startX</param>
                                            <param id="1" name="Value">Self.X</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="543952790615976" type="player">
                                            <param id="0" name="Instance variable">startY</param>
                                            <param id="1" name="Value">Self.Y</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="294762433904141" type="player">
                                            <param id="0" name="Instance variable">targetX</param>
                                            <param id="1" name="Value">tilemap.TileToPositionX(playerX)</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="619954813560704" type="player">
                                            <param id="0" name="Instance variable">targetY</param>
                                            <param id="1" name="Value">tilemap.TileToPositionY(playerY)</param>
                                        </action>
                                        <action behavior="Timer" id="0" name="Start timer" sid="545770049582731" type="player">
                                            <param id="0" name="Duration">moveTime</param>
                                            <param id="1" name="Type">0</param>
                                            <param id="2" name="Tag">&quot;Moving&quot;</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="476434620977670" type="player">
                                            <param id="0" name="Instance variable">state</param>
                                            <param id="1" name="Value">&quot;moving&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="540624729163257">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="141388940233110" type="player">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;moving&quot;</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <variable constant="0" name="ratio" sid="360672105294022" static="0" type="number">0</variable>
                                <event-block sid="448164250289963">
                                    <conditions />
                                    <actions>
                                        <action id="-9" name="Set value" sid="476675341417153" type="System">
                                            <param id="0" name="Variable">ratio</param>
                                            <param id="1" name="Value">player.Timer.CurrentTime(&quot;Moving&quot;) / player.Timer.Duration(&quot;Moving&quot;)</param>
                                        </action>
                                        <action id="-3" name="Set position" sid="190239191526067" type="player">
                                            <param id="0" name="X">lerp(self.startX,Self.targetX,ratio)</param>
                                            <param id="1" name="Y">lerp(self.startY,Self.targetY,ratio)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="516922921351501">
                                    <conditions>
                                        <condition behavior="Timer" id="0" name="On timer" sid="241904770893961" type="player">
                                            <param id="0" name="Tag">&quot;Moving&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-3" name="Set position" sid="802761276346982" type="player">
                                            <param id="0" name="X">Self.targetX</param>
                                            <param id="1" name="Y">Self.targetY</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="341229282399738" type="player">
                                            <param id="0" name="Instance variable">state</param>
                                            <param id="1" name="Value">&quot;idle&quot;</param>
                                        </action>
                                        <action id="0" name="Call function" sid="504150383897901" type="Function">
                                            <param id="0" name="Name">&quot;setDirection&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="461914410283176">
                            <conditions />
                            <actions />
                        </event-block>
                        <event-block sid="725520140342787">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="154194190799093" type="player">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">&quot;idle&quot;</param>
                                </condition>
                                <condition id="-4" name="Trigger once while true" sid="694864197474275" type="System" />
                            </conditions>
                            <actions>
                                <action id="2" name="Stop" sid="127053608793568" type="player" />
                                <action id="5" name="Set frame" sid="779544795310201" type="player">
                                    <param id="0" name="Frame number">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-group>
                <comment>Exit test mode and reset all default values of player object and it&apos;s position</comment>
                <event-block any="1" sid="144169035451846">
                    <conditions>
                        <condition id="0" name="On clicked" sid="373137027551173" type="btnPlay" />
                        <condition id="0" name="On key pressed" sid="423322396210172" type="Keyboard">
                            <param id="0" name="Key">113</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="149177355075201">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="671574818522992" type="btnPlay">
                                    <param id="0" name="Instance variable">isPlaying</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="277504011206661" type="player">
                                    <param id="0" name="Instance variable">startCellX</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="167546865420672" type="player">
                                    <param id="0" name="Instance variable">startCellY</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="144199838866822" type="player">
                                    <param id="0" name="Instance variable">targetX</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="192306724114337" type="player">
                                    <param id="0" name="Instance variable">targetY</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="642890975843572" type="player">
                                    <param id="0" name="Instance variable">startX</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="873783264126177" type="player">
                                    <param id="0" name="Instance variable">startY</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="304287731088620" type="player">
                                    <param id="0" name="Instance variable">directionX</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="719159810880720" type="player">
                                    <param id="0" name="Instance variable">directionY</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="230081621214199" type="player">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Value">&quot;idle&quot;</param>
                                </action>
                                <action id="-9" name="Set value" sid="614292671836729" type="System">
                                    <param id="0" name="Variable">playerX</param>
                                    <param id="1" name="Value">oldX</param>
                                </action>
                                <action id="-9" name="Set value" sid="763524622923957" type="System">
                                    <param id="0" name="Variable">playerY</param>
                                    <param id="1" name="Value">oldY</param>
                                </action>
                                <action id="4" name="Set animation" sid="392591549000510" type="player">
                                    <param id="0" name="Animation">&quot;down&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                                <action id="-9" name="Set value" sid="618419726251323" type="System">
                                    <param id="0" name="Variable">testMap</param>
                                    <param id="1" name="Value">2</param>
                                </action>
                                <action id="8" name="Set unfocused" sid="633954623052407" type="btnPlay" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
